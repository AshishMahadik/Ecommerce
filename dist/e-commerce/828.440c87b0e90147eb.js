"use strict";(self.webpackChunke_commerce=self.webpackChunke_commerce||[]).push([[828],{1382:(E,T,p)=>{p.d(T,{_:()=>x});var g=p(4650);let x=(()=>{class e{transform(M,b){return"INR"===b||"\u20b9"===b?Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(Number(M)):"USD"===b||"$"===b?Intl.NumberFormat("en-IN",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(Number(M)):M}}return e.\u0275fac=function(M){return new(M||e)},e.\u0275pipe=g.Yjl({name:"customeCurrency",type:e,pure:!0}),e})()},6860:(E,T,p)=>{p.d(T,{$9:()=>I,BB:()=>e,E0:()=>M,YT:()=>C,cr:()=>x,gz:()=>b,k_:()=>u});var g=p(1495);const x=(0,g.PH)("addproduct",(0,g.Ky)()),e=(0,g.PH)("removeproduct",(0,g.Ky)()),C=(0,g.PH)("increaseqty",(0,g.Ky)()),M=(0,g.PH)("decreaseqty",(0,g.Ky)()),b=(0,g.PH)("checklogin"),I=(0,g.PH)("emptycart"),u=(0,g.PH)("checkprice")},7047:(E,T,p)=>{p.d(T,{C:()=>I});var g=p(1495),x=p(6860);const C=localStorage.getItem("cart")?JSON.parse('{"products":[],"price":0}'):{},M={products:C.products,price:C.price,login:!!localStorage.getItem("loginuser")},b=(0,g.Lq)(M,(0,g.on)(x.cr,(u,d)=>({...u,price:u.price+(d.product.deal?d.product.deal.price:d.product.price),products:u.products?[...u.products,d.product]:[d.product]})),(0,g.on)(x.BB,(u,d)=>({...u,products:u.products?.filter(_=>_.productId!==d.productId),price:u.products?.reduce((_,z)=>z.productId!==d.productId?_+z.subTotal:_+0,0)})),(0,g.on)(x.YT,(u,d)=>({...u,products:u.products.map(_=>_.productId===d.productId?{..._,qty:_.qty+1,subTotal:_.subTotal+(_.deal?_.deal.price:_.price)}:_)})),(0,g.on)(x.E0,(u,d)=>({...u,products:u.products.map(_=>_.productId===d.productId?{..._,qty:_.qty-1,subTotal:_.subTotal-(_.deal?_.deal?.price:_.price)}:_)})),(0,g.on)(x.gz,u=>({...u,login:!!localStorage.getItem("loginuser")})),(0,g.on)(x.$9,u=>({...u,products:[],price:0})),(0,g.on)(x.k_,u=>({...u,price:u.products.reduce((d,_)=>d+_.subTotal,0)})));function I(u,d){return b(u,d)}},1010:(E,T,p)=>{p.d(T,{s:()=>e});var g=p(4650),x=p(2467);let e=(()=>{class C{constructor(b){this.router=b}canActivate(){return this.flag(localStorage.getItem("loginuser")||"")}flag(b){return b.length>0||(this.router.navigate([""]),!1)}}return C.\u0275fac=function(b){return new(b||C)(g.LFG(x.F0))},C.\u0275prov=g.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})()},6828:(E,T,p)=>{p.r(T),p.d(T,{ShopModule:()=>ot});var g=p(6895),x=p(2467),e=p(4650),C=p(7072),M=p(6081),b=p(5798),I=p(1495);let u=(()=>{class r{constructor(t){this.elmRef=t}ngOnInit(){let t=this.elmRef.nativeElement;this.org=this.elmRef?.nativeElement?.textContent,this.appDeal?setInterval(()=>{t.innerHTML=this.countdown(this.appDeal,this.org)},1e3):t.innerHTML=`<strong>${this.org}</strong>`}countdown(t,i){let o=new Date(t.ends),n=new Date,a=(o.getTime()-n.getTime())/1e3,c=Math.ceil(a/3600/24*1)/1-1,l=Math.ceil(1*(a/3600-24*c))/1-1,h=Math.ceil(a/60-1*(1440*c+60*l))/1-1,f=Math.ceil(1*(a-(86400*c+3600*l+60*h)))/1-1;return`<strong><del>${i}</del> \u20b9${t.price}</strong><br><small>(${t.discount} discount) \n      <br>Deal ends in ${c}D:${l}H:${h}M:${f}S<small>`}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(e.SBq))},r.\u0275dir=e.lG2({type:r,selectors:[["","appDeal",""]],inputs:{appDeal:"appDeal"}}),r})();var d=p(433),_=p(6860),z=p(1382);const oe=["close"],ne=["open"];function re(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"img",24),e.NdJ("click",function(){const n=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.selectedimg=n.url)}),e.qZA()()}if(2&r){const t=s.$implicit;e.xp6(1),e.Q6J("src",t.url,e.LSH)}}function ae(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.add())}),e._uU(1," Add To Cart"),e.qZA()}}function se(r,s){1&r&&(e.TgZ(0,"button",26),e._uU(1," Go To Cart"),e.qZA()),2&r&&e.Q6J("routerLink","/shop/cart")}function ce(r,s){if(1&r&&(e.TgZ(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",12),e.YNc(4,re,2,1,"div",13),e.qZA(),e.TgZ(5,"div",14),e._UZ(6,"img",15),e.qZA(),e.TgZ(7,"div",16)(8,"h3",17),e._uU(9),e.qZA(),e._UZ(10,"div",18),e.TgZ(11,"div",19),e._UZ(12,"h4",20),e.ALo(13,"customeCurrency"),e.YNc(14,ae,2,0,"button",21),e.YNc(15,se,2,1,"button",22),e.qZA(),e._UZ(16,"br"),e.TgZ(17,"h4")(18,"strong"),e._uU(19,"Description"),e.qZA()(),e._UZ(20,"br")(21,"p",23),e.qZA()()()()),2&r){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",null==t.item?null:t.item.images),e.xp6(2),e.Q6J("src",t.selectedimg?t.selectedimg:null==t.item||null==t.item.images[0]?null:t.item.images[0].url,e.LSH),e.xp6(3),e.Oqu(null==t.item?null:t.item.name),e.xp6(3),e.Q6J("appDeal",null==t.item?null:t.item.deal)("innerText",e.xi3(13,8,null==t.item?null:t.item.price,"INR")),e.xp6(2),e.Q6J("ngIf",!t.cartproduct),e.xp6(1),e.Q6J("ngIf",t.cartproduct),e.xp6(6),e.Q6J("innerHTML",null==t.item?null:t.item.description,e.oJD)}}let le=(()=>{class r{constructor(t,i){this.service=t,this.store=i,this.trigger=new e.vpe}ngOnInit(){this.trigger.emit([this.open,this.close]),this.service.product.subscribe(t=>{this.item=t})}add(){let t;console.log(this.item),t=this.item.deal?{productId:this.item._id,name:this.item.name,price:this.item.price,qty:1,subTotal:this.item.deal.price,deal:{discount:this.item.deal.discount,ends:this.item.deal.ends,price:this.item.deal.price}}:{productId:this.item._id,name:this.item.name,price:this.item.price,qty:1,subTotal:this.item.price},this.store.dispatch((0,_.cr)({product:t})),this.store.select("cart").subscribe(i=>localStorage.setItem("cart",JSON.stringify(i))),this.cartproduct=!0}emptyitem(){this.service.product.next(void 0)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(C.s),e.Y36(I.yh))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-single-product"]],viewQuery:function(t,i){if(1&t&&(e.Gf(oe,7),e.Gf(ne,7)),2&t){let o;e.iGM(o=e.CRH())&&(i.close=o.first),e.iGM(o=e.CRH())&&(i.open=o.first)}},inputs:{cartproduct:"cartproduct"},outputs:{trigger:"trigger"},decls:9,vars:1,consts:[["id","singleproduct","data-bs-backdrop","static","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-xl","modal-dialog-centered"],[1,"modal-content"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close","m-3","position-absolute","top-0","end-0","z-1",3,"click"],["class","modal-body",4,"ngIf"],["hidden","","data-bs-dismiss","modal"],["close",""],["hidden","","data-bs-toggle","modal","data-bs-target","#singleproduct"],["open",""],[1,"modal-body"],[1,"container","p-4"],[1,"row","column-gap-2"],[1,"col-auto","d-flex","flex-md-column","flex-row","overflow-auto",2,"height","450px"],[4,"ngFor","ngForOf"],[1,"col-3"],[1,"img-fluid",3,"src"],[1,"col","overflow-auto",2,"height","70vh"],[1,"fw-bolder","text-capitalize",2,"word-spacing","-2px"],[1,"line","w-auto","bg-black","me-5","my-3",2,"height","1px"],[1,"d-flex","justify-content-between"],[1,"card-text","mt-2",3,"appDeal","innerText"],["class","btn btn-outline-success","style","height: fit-content;",3,"click",4,"ngIf"],["class","btn btn-outline-primary","data-bs-dismiss","modal","style","height: fit-content;",3,"routerLink",4,"ngIf"],[3,"innerHTML"],[1,"img-thumbnail","object-fit-contain","my-1",2,"height","100px","width","100px",3,"src","click"],[1,"btn","btn-outline-success",2,"height","fit-content",3,"click"],["data-bs-dismiss","modal",1,"btn","btn-outline-primary",2,"height","fit-content",3,"routerLink"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),e.NdJ("click",function(){return i.selectedimg=null,i.emptyitem()}),e.qZA(),e.YNc(4,ce,22,11,"div",4),e.qZA()(),e._UZ(5,"button",5,6)(7,"button",7,8),e.qZA()),2&t&&(e.xp6(4),e.Q6J("ngIf",i.item))},dependencies:[g.sg,g.O5,u,x.rH,z._]}),r})();var N=p(3977);function de(r,s){if(1&r&&e._UZ(0,"img",40),2&r){const t=e.oxw().$implicit;e.Q6J("src",t.images[0].url,e.LSH)}}function pe(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",28)(1,"div",29),e.NdJ("click",function(){const n=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.singleProduct(n,a.checkcart(n)))}),e.TgZ(2,"div",30)(3,"div",31),e.YNc(4,de,1,1,"img",32),e.qZA(),e.TgZ(5,"div",33)(6,"div",34)(7,"h5",35),e._uU(8),e.ALo(9,"description"),e.qZA(),e._UZ(10,"div",36),e.TgZ(11,"small",37)(12,"b"),e._uU(13,"Description:"),e._UZ(14,"br"),e.qZA()(),e._UZ(15,"small",38),e.ALo(16,"description"),e._UZ(17,"h6",39),e.ALo(18,"customeCurrency"),e.qZA()()()()()}if(2&r){const t=s.$implicit;e.xp6(4),e.Q6J("ngIf",t.images[0]),e.xp6(4),e.hij(" ",e.xi3(9,5,t.name,"title"),""),e.xp6(7),e.Q6J("innerHTML",e.xi3(16,8,t.description,""),e.oJD),e.xp6(2),e.Q6J("appDeal",t.deal)("innerText",e.xi3(18,11,t.price,"INR"))}}let ge=(()=>{class r{constructor(t,i,o,n){this.service=t,this.loader=i,this.navbar=o,this.store=n,this.pagination={sortBy:"name",limit:10,page:1},this.des="",this.search=""}ngOnInit(){this.navbar.flag.next(!1),this.loader.start(),this.getproductslist(),this.store.select("cart").subscribe(t=>this.cartdata=t)}getproductslist(){this.search.length>0?this.pagination.name=this.search:this.pagination={sortBy:this.pagination.sortBy,limit:this.pagination.limit,page:this.pagination.page},this.service.getlist(this.pagination).subscribe(t=>{this.results=t.results,this.loader.stop()},t=>{this.loader.stop(),console.log(t)})}changePage(t){this.pagination.page=this.pagination.page+t,0==this.pagination.page&&(this.pagination.page=1),this.getproductslist()}checkcart(t){let i;return this.cartdata?.products?.forEach(o=>{t._id===o.productId&&(i=o)}),i}singleProduct(t,i){this.service.product.next(t),this.cartproduct=i,this.service.product.next(t),this.trigger[0].nativeElement.click()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(C.s),e.Y36(M.LA),e.Y36(b.I),e.Y36(I.yh))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-list-of-products"]],decls:46,vars:6,consts:[[1,"container-fluid","row","py-2","px-0","m-0"],[1,"col-xxl-2","d-none","d-xxl-block","rounded","mt-3","px-3","py-5","me-4","sticky-xl-top","shadow-lg",2,"height","100%","width","auto","top","70px","margin-left","-10px"],[1,"d-flex","justify-content-between"],[1,"fw-bold"],["role","button",1,"pagination"],[1,"page-item"],["aria-label","Previous",1,"page-link","text-white","bg-dark",3,"click"],["aria-hidden","true"],[1,"page-link","text-black"],["aria-label","Next",1,"page-link","text-white","bg-dark",3,"click"],[1,"form-floating","my-2"],["type","email","id","floatingInput","placeholder","name@example.com",1,"form-control","border-black",3,"ngModel","ngModelChange","keyup"],["for","floatingInput"],[1,"form-floating","my-3"],["id","floatingSelect","aria-label","Floating label select example",1,"form-select","border-black",3,"ngModel","ngModelChange","click"],["value","name"],["value","price"],["value","images"],["for","floatingSelect"],[1,"form-floating"],["id","limit","aria-label","Floating label select example",1,"form-select","border-black",3,"ngModel","ngModelChange","click"],["value","10"],["value","20"],["value","40"],["value","80"],[1,"col-xxl-10","col-lg-12","p-0","row"],["class","col-lg-4 col-md-6 col-sm-12 g-3",4,"ngFor","ngForOf"],[3,"cartproduct","trigger"],[1,"col-lg-4","col-md-6","col-sm-12","g-3"],[1,"card","shadow-lg","border-0","rounded-3",2,"max-width","540px",3,"click"],[1,"row","g-0",2,"min-height","250px"],[1,"col-md-6"],["style","height: 250px; object-position: left;border-radius: 10px 0 0 10px;","class","img-fluid object-fit-contain left w-100","alt","product image",3,"src",4,"ngIf"],[1,"col-md-6","d-flex","align-items-center"],[1,"card-body"],[1,"card-title","text-capitalize","ls","lh-1","text-wrap","m-0","p-0","fw-bold"],[1,"w-100","bg-black","my-1"],[1,"card-text","mb-0",2,"max-width","176px"],[1,"",2,"overflow-wrap","anywhere",3,"innerHTML"],[1,"card-text","mt-2",3,"appDeal","innerText"],["alt","product image",1,"img-fluid","object-fit-contain","left","w-100",2,"height","250px","object-position","left","border-radius","10px 0 0 10px",3,"src"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),e._uU(4,"Filters"),e.qZA(),e.TgZ(5,"ul",4)(6,"li",5)(7,"a",6),e.NdJ("click",function(){return i.changePage(-1)}),e.TgZ(8,"span",7),e._uU(9,"\xab"),e.qZA()()(),e.TgZ(10,"li",5)(11,"a",8),e._uU(12),e.qZA()(),e.TgZ(13,"li",5)(14,"a",9),e.NdJ("click",function(){return i.changePage(1)}),e.TgZ(15,"span",7),e._uU(16,"\xbb"),e.qZA()()()()(),e.TgZ(17,"div",10)(18,"input",11),e.NdJ("ngModelChange",function(n){return i.search=n})("keyup",function(){return i.getproductslist()}),e.qZA(),e.TgZ(19,"label",12),e._uU(20,"Search"),e.qZA()(),e.TgZ(21,"div",13)(22,"select",14),e.NdJ("ngModelChange",function(n){return i.pagination.sortBy=n})("click",function(){return i.getproductslist()}),e.TgZ(23,"option",15),e._uU(24,"Name"),e.qZA(),e.TgZ(25,"option",16),e._uU(26,"Price"),e.qZA(),e.TgZ(27,"option",17),e._uU(28,"images"),e.qZA()(),e.TgZ(29,"label",18),e._uU(30,"Sort By"),e.qZA()(),e.TgZ(31,"div",19)(32,"select",20),e.NdJ("ngModelChange",function(n){return i.pagination.limit=n})("click",function(){return i.getproductslist()}),e.TgZ(33,"option",21),e._uU(34,"10"),e.qZA(),e.TgZ(35,"option",22),e._uU(36,"20"),e.qZA(),e.TgZ(37,"option",23),e._uU(38,"40"),e.qZA(),e.TgZ(39,"option",24),e._uU(40,"80"),e.qZA()(),e.TgZ(41,"label",18),e._uU(42,"Limit"),e.qZA()()(),e.TgZ(43,"div",25),e.YNc(44,pe,19,14,"div",26),e.qZA()(),e.TgZ(45,"app-single-product",27),e.NdJ("trigger",function(n){return i.trigger=n}),e.qZA()),2&t&&(e.xp6(12),e.Oqu(i.pagination.page),e.xp6(6),e.Q6J("ngModel",i.search),e.xp6(4),e.Q6J("ngModel",i.pagination.sortBy),e.xp6(10),e.Q6J("ngModel",i.pagination.limit),e.xp6(12),e.Q6J("ngForOf",i.results),e.xp6(1),e.Q6J("cartproduct",i.cartproduct))},dependencies:[g.sg,g.O5,u,d.YN,d.Kr,d.Fj,d.EJ,d.JJ,d.On,le,N.O,z._]}),r})();var he=p(5226),A=p.n(he),W=p(5861),me=p(1481);const ue=["wrapper"],fe=["sourceImage"];function _e(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"img",4,5),e.NdJ("load",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.imageLoadedInView())})("mousedown",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.startMove(o,n.moveTypes.Drag))})("touchstart",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.startMove(o,n.moveTypes.Drag))})("error",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.loadImageError(o))}),e.qZA()}if(2&r){const t=e.oxw();e.Udp("visibility",t.imageVisible?"visible":"hidden")("transform",t.safeTransformStyle),e.ekj("ngx-ic-draggable",!t.disabled&&t.allowMoveImage),e.Q6J("src",t.safeImgDataUrl,e.LSH),e.uIk("alt",t.imageAltText)}}function xe(r,s){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"span",9),e.NdJ("mousedown",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.startMove(o,n.moveTypes.Resize,"topleft"))})("touchstart",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.startMove(o,n.moveTypes.Resize,"topleft"))}),e._UZ(2,"span",10),e.qZA(),e.TgZ(3,"span",11),e._UZ(4,"span",10),e.qZA(),e.TgZ(5,"span",12),e.NdJ("mousedown",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.startMove(o,n.moveTypes.Resize,"topright"))})("touchstart",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.startMove(o,n.moveTypes.Resize,"topright"))}),e._UZ(6,"span",10),e.qZA(),e.TgZ(7,"span",13),e._UZ(8,"span",10),e.qZA(),e.TgZ(9,"span",14),e.NdJ("mousedown",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.startMove(o,n.moveTypes.Resize,"bottomright"))})("touchstart",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.startMove(o,n.moveTypes.Resize,"bottomright"))}),e._UZ(10,"span",10),e.qZA(),e.TgZ(11,"span",15),e._UZ(12,"span",10),e.qZA(),e.TgZ(13,"span",16),e.NdJ("mousedown",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.startMove(o,n.moveTypes.Resize,"bottomleft"))})("touchstart",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.startMove(o,n.moveTypes.Resize,"bottomleft"))}),e._UZ(14,"span",10),e.qZA(),e.TgZ(15,"span",17),e._UZ(16,"span",10),e.qZA(),e.TgZ(17,"span",18),e.NdJ("mousedown",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.startMove(o,n.moveTypes.Resize,"top"))})("touchstart",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.startMove(o,n.moveTypes.Resize,"top"))}),e.qZA(),e.TgZ(18,"span",19),e.NdJ("mousedown",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.startMove(o,n.moveTypes.Resize,"right"))})("touchstart",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.startMove(o,n.moveTypes.Resize,"right"))}),e.qZA(),e.TgZ(19,"span",20),e.NdJ("mousedown",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.startMove(o,n.moveTypes.Resize,"bottom"))})("touchstart",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.startMove(o,n.moveTypes.Resize,"bottom"))}),e.qZA(),e.TgZ(20,"span",21),e.NdJ("mousedown",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.startMove(o,n.moveTypes.Resize,"left"))})("touchstart",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.startMove(o,n.moveTypes.Resize,"left"))}),e.qZA(),e.BQk()}}function Ce(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",6),e.NdJ("keydown",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.keyboardAccess(o))}),e.TgZ(1,"div",7),e.NdJ("mousedown",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.startMove(o,n.moveTypes.Move))})("touchstart",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.startMove(o,n.moveTypes.Move))}),e.qZA(),e.YNc(2,xe,21,0,"ng-container",8),e.qZA()}if(2&r){const t=e.oxw();e.Udp("top",t.cropper.y1,"px")("left",t.cropper.x1,"px")("width",t.cropper.x2-t.cropper.x1,"px")("height",t.cropper.y2-t.cropper.y1,"px")("margin-left","center"===t.alignImage?t.marginLeft:null)("visibility",t.imageVisible?"visible":"hidden"),e.ekj("ngx-ic-round",t.roundCropper),e.xp6(2),e.Q6J("ngIf",!t.hideResizeSquares)}}class be{constructor(){this.format="png",this.maintainAspectRatio=!0,this.transform={},this.aspectRatio=1,this.resetCropOnAspectRatioChange=!0,this.resizeToWidth=0,this.resizeToHeight=0,this.cropperMinWidth=0,this.cropperMinHeight=0,this.cropperMaxHeight=0,this.cropperMaxWidth=0,this.cropperStaticWidth=0,this.cropperStaticHeight=0,this.canvasRotation=0,this.initialStepSize=3,this.roundCropper=!1,this.onlyScaleDown=!1,this.imageQuality=92,this.autoCrop=!0,this.backgroundColor=null,this.containWithinAspectRatio=!1,this.hideResizeSquares=!1,this.alignImage="center",this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.cropperScaledMaxWidth=20,this.cropperScaledMaxHeight=20,this.stepSize=this.initialStepSize}setOptions(s){Object.keys(s).filter(t=>t in this).forEach(t=>this[t]=s[t]),this.validateOptions()}setOptionsFromChanges(s){Object.keys(s).filter(t=>t in this).forEach(t=>this[t]=s[t].currentValue),this.validateOptions()}validateOptions(){if(this.maintainAspectRatio&&!this.aspectRatio)throw new Error("`aspectRatio` should > 0 when `maintainAspectRatio` is enabled")}}var v=(()=>{return(r=v||(v={})).Drag="drag",r.Move="move",r.Resize="resize",r.Pinch="pinch",v;var r})();function Y(r,s){return r/100*s}let we=(()=>{class r{crop(t,i,o,n){const a=this.getImagePosition(t,i,o,n),c=a.x2-a.x1,l=a.y2-a.y1,h=document.createElement("canvas");h.width=c,h.height=l;const f=h.getContext("2d");if(!f)return null;null!=n.backgroundColor&&(f.fillStyle=n.backgroundColor,f.fillRect(0,0,c,l));const m=(n.transform.scale||1)*(n.transform.flipH?-1:1),Z=(n.transform.scale||1)*(n.transform.flipV?-1:1),{translateH:k,translateV:R}=this.getCanvasTranslate(t,i,n),w=i.transformed;f.setTransform(m,0,0,Z,w.size.width/2+k,w.size.height/2+R),f.translate(-a.x1/m,-a.y1/Z),f.rotate((n.transform.rotate||0)*Math.PI/180),f.drawImage(w.image,-w.size.width/2,-w.size.height/2);const y={width:c,height:l,imagePosition:a,cropperPosition:{...o}};n.containWithinAspectRatio&&(y.offsetImagePosition=this.getOffsetImagePosition(t,i,o,n));const H=this.getResizeRatio(c,l,n);return 1!==H&&(y.width=Math.round(c*H),y.height=n.maintainAspectRatio?Math.round(y.width/n.aspectRatio):Math.round(l*H),function Ae(r,s,t){const i=r.width,o=r.height,n=i/(s=Math.round(s)),a=o/(t=Math.round(t)),c=Math.ceil(n/2),l=Math.ceil(a/2),h=r.getContext("2d");if(h){const f=h.getImageData(0,0,i,o),m=h.createImageData(s,t),Z=f.data,k=m.data;for(let R=0;R<t;R++)for(let w=0;w<s;w++){const y=4*(w+R*s),H=R*a;let S=0,L=0,j=0,X=0,V=0,$=0,ee=0;const nt=Math.floor(w*n),rt=Math.floor(R*a);let B=Math.ceil((w+1)*n),Q=Math.ceil((R+1)*a);B=Math.min(B,i),Q=Math.min(Q,o);for(let q=rt;q<Q;q++){const te=Math.abs(H-q)/l,at=w*n,st=te*te;for(let J=nt;J<B;J++){const ie=Math.abs(at-J)/c,O=Math.sqrt(st+ie*ie);if(O>=1)continue;S=2*O*O*O-3*O*O+1;const U=4*(J+q*i);ee+=S*Z[U+3],j+=S,Z[U+3]<255&&(S=S*Z[U+3]/250),X+=S*Z[U],V+=S*Z[U+1],$+=S*Z[U+2],L+=S}}k[y]=X/L,k[y+1]=V/L,k[y+2]=$/L,k[y+3]=ee/j}r.width=s,r.height=t,h.putImageData(m,0,0)}}(h,y.width,y.height)),y.base64=h.toDataURL("image/"+n.format,this.getQuality(n)),y}getCanvasTranslate(t,i,o){if("px"===o.transform.translateUnit){const n=this.getRatio(t,i);return{translateH:(o.transform.translateH||0)*n,translateV:(o.transform.translateV||0)*n}}return{translateH:o.transform.translateH?Y(o.transform.translateH,i.transformed.size.width):0,translateV:o.transform.translateV?Y(o.transform.translateV,i.transformed.size.height):0}}getRatio(t,i){return i.transformed.size.width/t.nativeElement.offsetWidth}getImagePosition(t,i,o,n){const a=this.getRatio(t,i),c={x1:Math.round(o.x1*a),y1:Math.round(o.y1*a),x2:Math.round(o.x2*a),y2:Math.round(o.y2*a)};return n.containWithinAspectRatio||(c.x1=Math.max(c.x1,0),c.y1=Math.max(c.y1,0),c.x2=Math.min(c.x2,i.transformed.size.width),c.y2=Math.min(c.y2,i.transformed.size.height)),c}getOffsetImagePosition(t,i,o,n){const l=i.transformed.size.width/t.nativeElement.offsetWidth;let h,f;(n.canvasRotation+i.exifTransform.rotate)%2?(h=(i.transformed.size.width-i.original.size.height)/2,f=(i.transformed.size.height-i.original.size.width)/2):(h=(i.transformed.size.width-i.original.size.width)/2,f=(i.transformed.size.height-i.original.size.height)/2);const m={x1:Math.round(o.x1*l)-h,y1:Math.round(o.y1*l)-f,x2:Math.round(o.x2*l)-h,y2:Math.round(o.y2*l)-f};return n.containWithinAspectRatio||(m.x1=Math.max(m.x1,0),m.y1=Math.max(m.y1,0),m.x2=Math.min(m.x2,i.transformed.size.width),m.y2=Math.min(m.y2,i.transformed.size.height)),m}getResizeRatio(t,i,o){const n=o.resizeToWidth/t,a=o.resizeToHeight/i,c=new Array;o.resizeToWidth>0&&c.push(n),o.resizeToHeight>0&&c.push(a);const l=0===c.length?1:Math.min(...c);return l>1&&!o.onlyScaleDown?l:Math.min(l,1)}getQuality(t){return Math.min(1,Math.max(0,t.imageQuality/100))}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Te=(()=>{class r{resetCropperPosition(t,i,o){if(!t?.nativeElement)return;const n=t.nativeElement;if(o.cropperStaticHeight&&o.cropperStaticWidth)i.x1=0,i.x2=n.offsetWidth>o.cropperStaticWidth?o.cropperStaticWidth:n.offsetWidth,i.y1=0,i.y2=n.offsetHeight>o.cropperStaticHeight?o.cropperStaticHeight:n.offsetHeight;else{const a=Math.min(o.cropperScaledMaxWidth,n.offsetWidth),c=Math.min(o.cropperScaledMaxHeight,n.offsetHeight);if(o.maintainAspectRatio)if(n.offsetWidth/o.aspectRatio<n.offsetHeight){i.x1=0,i.x2=a;const l=a/o.aspectRatio;i.y1=(n.offsetHeight-l)/2,i.y2=i.y1+l}else{i.y1=0,i.y2=c;const l=c*o.aspectRatio;i.x1=(n.offsetWidth-l)/2,i.x2=i.x1+l}else i.x1=0,i.x2=a,i.y1=0,i.y2=c}}move(t,i,o){const n=this.getClientX(t)-i.clientX,a=this.getClientY(t)-i.clientY;o.x1=i.x1+n,o.y1=i.y1+a,o.x2=i.x2+n,o.y2=i.y2+a}resize(t,i,o,n,a){const c=this.getClientX(t)-i.clientX,l=this.getClientY(t)-i.clientY;switch(i.position){case"left":o.x1=Math.min(Math.max(i.x1+c,o.x2-a.cropperScaledMaxWidth),o.x2-a.cropperScaledMinWidth);break;case"topleft":o.x1=Math.min(Math.max(i.x1+c,o.x2-a.cropperScaledMaxWidth),o.x2-a.cropperScaledMinWidth),o.y1=Math.min(Math.max(i.y1+l,o.y2-a.cropperScaledMaxHeight),o.y2-a.cropperScaledMinHeight);break;case"top":o.y1=Math.min(Math.max(i.y1+l,o.y2-a.cropperScaledMaxHeight),o.y2-a.cropperScaledMinHeight);break;case"topright":o.x2=Math.max(Math.min(i.x2+c,o.x1+a.cropperScaledMaxWidth),o.x1+a.cropperScaledMinWidth),o.y1=Math.min(Math.max(i.y1+l,o.y2-a.cropperScaledMaxHeight),o.y2-a.cropperScaledMinHeight);break;case"right":o.x2=Math.max(Math.min(i.x2+c,o.x1+a.cropperScaledMaxWidth),o.x1+a.cropperScaledMinWidth);break;case"bottomright":o.x2=Math.max(Math.min(i.x2+c,o.x1+a.cropperScaledMaxWidth),o.x1+a.cropperScaledMinWidth),o.y2=Math.max(Math.min(i.y2+l,o.y1+a.cropperScaledMaxHeight),o.y1+a.cropperScaledMinHeight);break;case"bottom":o.y2=Math.max(Math.min(i.y2+l,o.y1+a.cropperScaledMaxHeight),o.y1+a.cropperScaledMinHeight);break;case"bottomleft":o.x1=Math.min(Math.max(i.x1+c,o.x2-a.cropperScaledMaxWidth),o.x2-a.cropperScaledMinWidth),o.y2=Math.max(Math.min(i.y2+l,o.y1+a.cropperScaledMaxHeight),o.y1+a.cropperScaledMinHeight);break;case"center":const h=t.scale,f=Math.min(Math.max(a.cropperScaledMinWidth,Math.abs(i.x2-i.x1)*h),a.cropperScaledMaxWidth),m=Math.min(Math.max(a.cropperScaledMinHeight,Math.abs(i.y2-i.y1)*h),a.cropperScaledMaxHeight);o.x1=i.clientX-f/2,o.x2=i.clientX+f/2,o.y1=i.clientY-m/2,o.y2=i.clientY+m/2,o.x1<0?(o.x2-=o.x1,o.x1=0):o.x2>n.width&&(o.x1-=o.x2-n.width,o.x2=n.width),o.y1<0?(o.y2-=o.y1,o.y1=0):o.y2>n.height&&(o.y1-=o.y2-n.height,o.y2=n.height)}a.maintainAspectRatio&&this.checkAspectRatio(i.position,o,n,a)}checkAspectRatio(t,i,o,n){let a=0,c=0;switch(t){case"top":i.x2=i.x1+(i.y2-i.y1)*n.aspectRatio,a=Math.max(i.x2-o.width,0),c=Math.max(0-i.y1,0),(a>0||c>0)&&(i.x2-=c*n.aspectRatio>a?c*n.aspectRatio:a,i.y1+=c*n.aspectRatio>a?c:a/n.aspectRatio);break;case"bottom":i.x2=i.x1+(i.y2-i.y1)*n.aspectRatio,a=Math.max(i.x2-o.width,0),c=Math.max(i.y2-o.height,0),(a>0||c>0)&&(i.x2-=c*n.aspectRatio>a?c*n.aspectRatio:a,i.y2-=c*n.aspectRatio>a?c:a/n.aspectRatio);break;case"topleft":i.y1=i.y2-(i.x2-i.x1)/n.aspectRatio,a=Math.max(0-i.x1,0),c=Math.max(0-i.y1,0),(a>0||c>0)&&(i.x1+=c*n.aspectRatio>a?c*n.aspectRatio:a,i.y1+=c*n.aspectRatio>a?c:a/n.aspectRatio);break;case"topright":i.y1=i.y2-(i.x2-i.x1)/n.aspectRatio,a=Math.max(i.x2-o.width,0),c=Math.max(0-i.y1,0),(a>0||c>0)&&(i.x2-=c*n.aspectRatio>a?c*n.aspectRatio:a,i.y1+=c*n.aspectRatio>a?c:a/n.aspectRatio);break;case"right":case"bottomright":i.y2=i.y1+(i.x2-i.x1)/n.aspectRatio,a=Math.max(i.x2-o.width,0),c=Math.max(i.y2-o.height,0),(a>0||c>0)&&(i.x2-=c*n.aspectRatio>a?c*n.aspectRatio:a,i.y2-=c*n.aspectRatio>a?c:a/n.aspectRatio);break;case"left":case"bottomleft":i.y2=i.y1+(i.x2-i.x1)/n.aspectRatio,a=Math.max(0-i.x1,0),c=Math.max(i.y2-o.height,0),(a>0||c>0)&&(i.x1+=c*n.aspectRatio>a?c*n.aspectRatio:a,i.y2-=c*n.aspectRatio>a?c:a/n.aspectRatio);break;case"center":i.x2=i.x1+(i.y2-i.y1)*n.aspectRatio,i.y2=i.y1+(i.x2-i.x1)/n.aspectRatio;const l=Math.max(0-i.x1,0),h=Math.max(i.x2-o.width,0),f=Math.max(i.y2-o.height,0),m=Math.max(0-i.y1,0);(l>0||h>0||f>0||m>0)&&(i.x1+=f*n.aspectRatio>l?f*n.aspectRatio:l,i.x2-=m*n.aspectRatio>h?m*n.aspectRatio:h,i.y1+=m*n.aspectRatio>h?m:h/n.aspectRatio,i.y2-=f*n.aspectRatio>l?f:l/n.aspectRatio)}}getClientX(t){return t.touches?.[0].clientX||t.clientX||0}getClientY(t){return t.touches?.[0].clientY||t.clientY||0}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();let Oe=(()=>{class r{constructor(){this.autoRotateSupported=function Se(){return new Promise(r=>{const s=new Image;s.onload=()=>{r(1===s.width&&2===s.height)},s.src="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q=="})}()}loadImageFile(t,i){return new Promise((o,n)=>{const a=new FileReader;a.onload=c=>{this.loadImage(c.target.result,t.type,i).then(o).catch(n)},a.readAsDataURL(t)})}loadImage(t,i,o){return this.isValidImageType(i)?this.loadBase64Image(t,o):Promise.reject(new Error("Invalid image type"))}isValidImageType(t){return/image\/(png|jpg|jpeg|bmp|gif|tiff|webp|x-icon|vnd.microsoft.icon)/.test(t)}loadImageFromURL(t,i){return new Promise((o,n)=>{const a=new Image;a.onerror=()=>n,a.onload=()=>{const c=document.createElement("canvas"),l=c.getContext("2d");c.width=a.width,c.height=a.height,l?.drawImage(a,0,0),this.loadBase64Image(c.toDataURL(),i).then(o)},a.crossOrigin="anonymous",a.src=t})}loadBase64Image(t,i){return new Promise((o,n)=>{const a=new Image;a.onload=()=>o({originalImage:a,originalBase64:t}),a.onerror=n,a.src=t}).then(o=>this.transformImageBase64(o,i))}transformImageBase64(t,i){var o=this;return(0,W.Z)(function*(){const n=yield o.autoRotateSupported,a=yield function Ie(r){switch("string"==typeof r&&(r=function Re(r){const s=new DataView(function ke(r){r=r.replace(/^data\:([^\;]+)\;base64,/gim,"");const s=atob(r),t=s.length,i=new Uint8Array(t);for(let o=0;o<t;o++)i[o]=s.charCodeAt(o);return i.buffer}(r));if(65496!==s.getUint16(0,!1))return-2;const t=s.byteLength;let i=2;for(;i<t;){if(s.getUint16(i+2,!1)<=8)return-1;const o=s.getUint16(i,!1);if(i+=2,65505==o){if(1165519206!==s.getUint32(i+=2,!1))return-1;const n=18761==s.getUint16(i+=6,!1);i+=s.getUint32(i+4,n);const a=s.getUint16(i,n);i+=2;for(let c=0;c<a;c++)if(274==s.getUint16(i+12*c,n))return s.getUint16(i+12*c+8,n)}else{if(65280!=(65280&o))break;i+=s.getUint16(i,!1)}}return-1}(r)),r){case 2:return{rotate:0,flip:!0};case 3:return{rotate:2,flip:!1};case 4:return{rotate:2,flip:!0};case 5:return{rotate:1,flip:!0};case 6:return{rotate:1,flip:!1};case 7:return{rotate:3,flip:!0};case 8:return{rotate:3,flip:!1};default:return{rotate:0,flip:!1}}}(n?-1:t.originalBase64);return t.originalImage&&t.originalImage.complete?o.transformLoadedImage({original:{base64:t.originalBase64,image:t.originalImage,size:{width:t.originalImage.naturalWidth,height:t.originalImage.naturalHeight}},exifTransform:a},i):Promise.reject(new Error("No image loaded"))})()}transformLoadedImage(t,i){var o=this;return(0,W.Z)(function*(){const n=i.canvasRotation+t.exifTransform.rotate,a={width:t.original.image.naturalWidth,height:t.original.image.naturalHeight};if(0===n&&!t.exifTransform.flip&&!i.containWithinAspectRatio)return{original:{base64:t.original.base64,image:t.original.image,size:{...a}},transformed:{base64:t.original.base64,image:t.original.image,size:{...a}},exifTransform:t.exifTransform};const c=o.getTransformedSize(a,t.exifTransform,i),l=document.createElement("canvas");l.width=c.width,l.height=c.height;const h=l.getContext("2d");h?.setTransform(t.exifTransform.flip?-1:1,0,0,1,l.width/2,l.height/2),h?.rotate(Math.PI*(n/2)),h?.drawImage(t.original.image,-a.width/2,-a.height/2);const f=l.toDataURL(),m=yield o.loadImageFromBase64(f);return{original:{base64:t.original.base64,image:t.original.image,size:{...a}},transformed:{base64:f,image:m,size:{width:m.width,height:m.height}},exifTransform:t.exifTransform}})()}loadImageFromBase64(t){return new Promise((i,o)=>{const n=new Image;n.onload=()=>i(n),n.onerror=o,n.src=t})}getTransformedSize(t,i,o){const n=o.canvasRotation+i.rotate;if(o.containWithinAspectRatio){if(n%2){const c=t.height/o.aspectRatio;return{width:Math.max(t.height,t.width*o.aspectRatio),height:Math.max(t.width,c)}}{const c=t.width/o.aspectRatio;return{width:Math.max(t.width,t.height*o.aspectRatio),height:Math.max(t.height,c)}}}return n%2?{height:t.width,width:t.height}:{width:t.width,height:t.height}}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Ue=(()=>{class r{constructor(t,i,o,n,a){this.cropService=t,this.cropperPositionService=i,this.loadImageService=o,this.sanitizer=n,this.cd=a,this.Hammer=window?.Hammer||null,this.settings=new be,this.setImageMaxSizeRetries=0,this.resizedWhileHidden=!1,this.marginLeft="0px",this.maxSize={width:0,height:0},this.moveTypes=v,this.imageVisible=!1,this.format=this.settings.format,this.transform={},this.maintainAspectRatio=this.settings.maintainAspectRatio,this.aspectRatio=this.settings.aspectRatio,this.resetCropOnAspectRatioChange=this.settings.resetCropOnAspectRatioChange,this.resizeToWidth=this.settings.resizeToWidth,this.resizeToHeight=this.settings.resizeToHeight,this.cropperMinWidth=this.settings.cropperMinWidth,this.cropperMinHeight=this.settings.cropperMinHeight,this.cropperMaxHeight=this.settings.cropperMaxHeight,this.cropperMaxWidth=this.settings.cropperMaxWidth,this.cropperStaticWidth=this.settings.cropperStaticWidth,this.cropperStaticHeight=this.settings.cropperStaticHeight,this.canvasRotation=this.settings.canvasRotation,this.initialStepSize=this.settings.initialStepSize,this.roundCropper=this.settings.roundCropper,this.onlyScaleDown=this.settings.onlyScaleDown,this.imageQuality=this.settings.imageQuality,this.autoCrop=this.settings.autoCrop,this.backgroundColor=this.settings.backgroundColor,this.containWithinAspectRatio=this.settings.containWithinAspectRatio,this.hideResizeSquares=this.settings.hideResizeSquares,this.allowMoveImage=!1,this.cropper={x1:-100,y1:-100,x2:1e4,y2:1e4},this.alignImage=this.settings.alignImage,this.disabled=!1,this.hidden=!1,this.imageCropped=new e.vpe,this.startCropImage=new e.vpe,this.imageLoaded=new e.vpe,this.cropperReady=new e.vpe,this.loadImageFailed=new e.vpe,this.transformChange=new e.vpe,this.reset()}ngOnChanges(t){this.onChangesUpdateSettings(t),this.onChangesInputImage(t),this.loadedImage?.original.image.complete&&(t.containWithinAspectRatio||t.canvasRotation)&&this.loadImageService.transformLoadedImage(this.loadedImage,this.settings).then(i=>this.setLoadedImage(i)).catch(i=>this.loadImageError(i)),(t.cropper||t.maintainAspectRatio||t.aspectRatio)&&(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),!this.maintainAspectRatio||!this.resetCropOnAspectRatioChange&&this.aspectRatioIsCorrect()||!t.maintainAspectRatio&&!t.aspectRatio?t.cropper&&(this.checkCropperPosition(!1),this.doAutoCrop()):this.resetCropperPosition(),this.cd.markForCheck()),t.transform&&(this.transform=this.transform||{},this.setCssTransform(),this.doAutoCrop(),this.cd.markForCheck()),t.hidden&&this.resizedWhileHidden&&!this.hidden&&setTimeout(()=>{this.onResize(),this.resizedWhileHidden=!1})}onChangesUpdateSettings(t){this.settings.setOptionsFromChanges(t),this.settings.cropperStaticHeight&&this.settings.cropperStaticWidth&&this.settings.setOptions({hideResizeSquares:!0,cropperMinWidth:this.settings.cropperStaticWidth,cropperMinHeight:this.settings.cropperStaticHeight,cropperMaxHeight:this.settings.cropperStaticHeight,cropperMaxWidth:this.settings.cropperStaticWidth,maintainAspectRatio:!1})}onChangesInputImage(t){(t.imageChangedEvent||t.imageURL||t.imageBase64||t.imageFile)&&this.reset(),t.imageChangedEvent&&this.isValidImageChangedEvent()&&this.loadImageFile(this.imageChangedEvent.target.files[0]),t.imageURL&&this.imageURL&&this.loadImageFromURL(this.imageURL),t.imageBase64&&this.imageBase64&&this.loadBase64Image(this.imageBase64),t.imageFile&&this.imageFile&&this.loadImageFile(this.imageFile)}isValidImageChangedEvent(){return this.imageChangedEvent?.target?.files?.length>0}setCssTransform(){const t=this.transform?.translateUnit||"%";this.safeTransformStyle=this.sanitizer.bypassSecurityTrustStyle(`translate(${this.transform.translateH||0}${t}, ${this.transform.translateV||0}${t}) scaleX(`+(this.transform.scale||1)*(this.transform.flipH?-1:1)+") scaleY("+(this.transform.scale||1)*(this.transform.flipV?-1:1)+") rotate("+(this.transform.rotate||0)+"deg)")}ngOnInit(){this.settings.stepSize=this.initialStepSize,this.activatePinchGesture()}reset(){this.imageVisible=!1,this.loadedImage=void 0,this.safeImgDataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",this.moveStart={active:!1,type:null,position:null,x1:0,y1:0,x2:0,y2:0,clientX:0,clientY:0},this.maxSize={width:0,height:0},this.cropper.x1=-100,this.cropper.y1=-100,this.cropper.x2=1e4,this.cropper.y2=1e4}loadImageFile(t){this.loadImageService.loadImageFile(t,this.settings).then(i=>this.setLoadedImage(i)).catch(i=>this.loadImageError(i))}loadBase64Image(t){this.loadImageService.loadBase64Image(t,this.settings).then(i=>this.setLoadedImage(i)).catch(i=>this.loadImageError(i))}loadImageFromURL(t){this.loadImageService.loadImageFromURL(t,this.settings).then(i=>this.setLoadedImage(i)).catch(i=>this.loadImageError(i))}setLoadedImage(t){this.loadedImage=t,this.safeImgDataUrl=this.sanitizer.bypassSecurityTrustResourceUrl(t.transformed.base64),this.cd.markForCheck()}loadImageError(t){console.error(t),this.loadImageFailed.emit()}imageLoadedInView(){null!=this.loadedImage&&(this.imageLoaded.emit(this.loadedImage),this.setImageMaxSizeRetries=0,setTimeout(()=>this.checkImageMaxSizeRecursively()))}checkImageMaxSizeRecursively(){this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImageLoaded()?(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.resetCropperPosition(),this.cropperReady.emit({...this.maxSize}),this.cd.markForCheck()):(this.setImageMaxSizeRetries++,setTimeout(()=>this.checkImageMaxSizeRecursively(),50))}sourceImageLoaded(){return this.sourceImage?.nativeElement?.offsetWidth>0}onResize(){this.loadedImage&&(this.hidden?this.resizedWhileHidden=!0:(this.resizeCropperPosition(),this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize()))}activatePinchGesture(){if(this.Hammer){const t=new this.Hammer(this.wrapper.nativeElement);t.get("pinch").set({enable:!0}),t.on("pinchmove",this.onPinch.bind(this)),t.on("pinchend",this.pinchStop.bind(this)),t.on("pinchstart",this.startPinch.bind(this))}else(0,e.X6Q)()&&console.warn("[NgxImageCropper] Could not find HammerJS - Pinch Gesture won't work")}resizeCropperPosition(){const t=this.sourceImage.nativeElement;(this.maxSize.width!==t.offsetWidth||this.maxSize.height!==t.offsetHeight)&&(this.cropper.x1=this.cropper.x1*t.offsetWidth/this.maxSize.width,this.cropper.x2=this.cropper.x2*t.offsetWidth/this.maxSize.width,this.cropper.y1=this.cropper.y1*t.offsetHeight/this.maxSize.height,this.cropper.y2=this.cropper.y2*t.offsetHeight/this.maxSize.height)}resetCropperPosition(){this.cropperPositionService.resetCropperPosition(this.sourceImage,this.cropper,this.settings),this.doAutoCrop(),this.imageVisible=!0}keyboardAccess(t){this.changeKeyboardStepSize(t),this.keyboardMoveCropper(t)}changeKeyboardStepSize(t){const i=+t.key;i>=1&&i<=9&&(this.settings.stepSize=i)}keyboardMoveCropper(t){if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key))return;const o=t.shiftKey?v.Resize:v.Move,n=t.altKey?function ve(r){switch(r){case"ArrowUp":return"bottom";case"ArrowRight":return"left";case"ArrowDown":return"top";default:return"right"}}(t.key):function Me(r){switch(r){case"ArrowUp":return"top";case"ArrowRight":return"right";case"ArrowDown":return"bottom";default:return"left"}}(t.key),a=function ye(r,s){switch(r){case"ArrowUp":return{clientX:0,clientY:-1*s};case"ArrowRight":return{clientX:s,clientY:0};case"ArrowDown":return{clientX:0,clientY:s};default:return{clientX:-1*s,clientY:0}}}(t.key,this.settings.stepSize);t.preventDefault(),t.stopPropagation(),this.startMove({clientX:0,clientY:0},o,n),this.moveImg(a),this.moveStop()}startMove(t,i,o=null){this.disabled||this.moveStart?.active&&this.moveStart?.type===v.Pinch||i===v.Drag&&!this.allowMoveImage||(t.preventDefault&&t.preventDefault(),this.moveStart={active:!0,type:i,position:o,transform:{...this.transform},clientX:this.cropperPositionService.getClientX(t),clientY:this.cropperPositionService.getClientY(t),...this.cropper})}startPinch(t){this.safeImgDataUrl&&(t.preventDefault&&t.preventDefault(),this.moveStart={active:!0,type:v.Pinch,position:"center",clientX:this.cropper.x1+(this.cropper.x2-this.cropper.x1)/2,clientY:this.cropper.y1+(this.cropper.y2-this.cropper.y1)/2,...this.cropper})}moveImg(t){if(this.moveStart.active){if(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),this.moveStart.type===v.Move)this.cropperPositionService.move(t,this.moveStart,this.cropper),this.checkCropperPosition(!0);else if(this.moveStart.type===v.Resize)!this.cropperStaticWidth&&!this.cropperStaticHeight&&this.cropperPositionService.resize(t,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1);else if(this.moveStart.type===v.Drag){const i=this.cropperPositionService.getClientX(t)-this.moveStart.clientX,o=this.cropperPositionService.getClientY(t)-this.moveStart.clientY;this.transform={...this.transform,translateH:(this.moveStart.transform?.translateH||0)+i,translateV:(this.moveStart.transform?.translateV||0)+o},this.setCssTransform()}this.cd.detectChanges()}}onPinch(t){this.moveStart.active&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),this.moveStart.type===v.Pinch&&(this.cropperPositionService.resize(t,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1)),this.cd.detectChanges())}setMaxSize(){if(this.sourceImage){const t=this.sourceImage.nativeElement;this.maxSize.width=t.offsetWidth,this.maxSize.height=t.offsetHeight,this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.maxSize.width/2+"px)")}}setCropperScaledMinSize(){this.loadedImage?.transformed?.image?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.settings.cropperScaledMinWidth=20,this.settings.cropperScaledMinHeight=20)}setCropperScaledMinWidth(){this.settings.cropperScaledMinWidth=this.cropperMinWidth>0?Math.max(20,this.cropperMinWidth/this.loadedImage.transformed.image.width*this.maxSize.width):20}setCropperScaledMinHeight(){this.settings.cropperScaledMinHeight=this.maintainAspectRatio?Math.max(20,this.settings.cropperScaledMinWidth/this.aspectRatio):this.cropperMinHeight>0?Math.max(20,this.cropperMinHeight/this.loadedImage.transformed.image.height*this.maxSize.height):20}setCropperScaledMaxSize(){if(this.loadedImage?.transformed?.image){const t=this.loadedImage.transformed.size.width/this.maxSize.width;this.settings.cropperScaledMaxWidth=this.cropperMaxWidth>20?this.cropperMaxWidth/t:this.maxSize.width,this.settings.cropperScaledMaxHeight=this.cropperMaxHeight>20?this.cropperMaxHeight/t:this.maxSize.height,this.maintainAspectRatio&&(this.settings.cropperScaledMaxWidth>this.settings.cropperScaledMaxHeight*this.aspectRatio?this.settings.cropperScaledMaxWidth=this.settings.cropperScaledMaxHeight*this.aspectRatio:this.settings.cropperScaledMaxWidth<this.settings.cropperScaledMaxHeight*this.aspectRatio&&(this.settings.cropperScaledMaxHeight=this.settings.cropperScaledMaxWidth/this.aspectRatio))}else this.settings.cropperScaledMaxWidth=this.maxSize.width,this.settings.cropperScaledMaxHeight=this.maxSize.height}checkCropperPosition(t=!1){this.cropper.x1<0&&(this.cropper.x2-=t?this.cropper.x1:0,this.cropper.x1=0),this.cropper.y1<0&&(this.cropper.y2-=t?this.cropper.y1:0,this.cropper.y1=0),this.cropper.x2>this.maxSize.width&&(this.cropper.x1-=t?this.cropper.x2-this.maxSize.width:0,this.cropper.x2=this.maxSize.width),this.cropper.y2>this.maxSize.height&&(this.cropper.y1-=t?this.cropper.y2-this.maxSize.height:0,this.cropper.y2=this.maxSize.height)}moveStop(){this.moveStart.active&&(this.moveStart.active=!1,this.moveStart?.type===v.Drag?this.transformChange.emit(this.transform):this.doAutoCrop())}pinchStop(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}doAutoCrop(){this.autoCrop&&this.crop()}crop(){if(null!=this.loadedImage?.transformed?.image){this.startCropImage.emit();const t=this.cropService.crop(this.sourceImage,this.loadedImage,this.cropper,this.settings);return null!=t&&this.imageCropped.emit(t),t}return null}aspectRatioIsCorrect(){return(this.cropper.x2-this.cropper.x1)/(this.cropper.y2-this.cropper.y1)===this.aspectRatio}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(we),e.Y36(Te),e.Y36(Oe),e.Y36(me.H7),e.Y36(e.sBO))},r.\u0275cmp=e.Xpm({type:r,selectors:[["image-cropper"]],viewQuery:function(t,i){if(1&t&&(e.Gf(ue,7),e.Gf(fe,5)),2&t){let o;e.iGM(o=e.CRH())&&(i.wrapper=o.first),e.iGM(o=e.CRH())&&(i.sourceImage=o.first)}},hostVars:6,hostBindings:function(t,i){1&t&&e.NdJ("resize",function(){return i.onResize()},!1,e.Jf7)("mousemove",function(n){return i.moveImg(n)},!1,e.evT)("touchmove",function(n){return i.moveImg(n)},!1,e.evT)("mouseup",function(){return i.moveStop()},!1,e.evT)("touchend",function(){return i.moveStop()},!1,e.evT),2&t&&(e.Udp("text-align",i.alignImage),e.ekj("disabled",i.disabled)("ngx-ix-hidden",i.hidden))},inputs:{imageChangedEvent:"imageChangedEvent",imageURL:"imageURL",imageBase64:"imageBase64",imageFile:"imageFile",imageAltText:"imageAltText",format:"format",transform:"transform",maintainAspectRatio:"maintainAspectRatio",aspectRatio:"aspectRatio",resetCropOnAspectRatioChange:"resetCropOnAspectRatioChange",resizeToWidth:"resizeToWidth",resizeToHeight:"resizeToHeight",cropperMinWidth:"cropperMinWidth",cropperMinHeight:"cropperMinHeight",cropperMaxHeight:"cropperMaxHeight",cropperMaxWidth:"cropperMaxWidth",cropperStaticWidth:"cropperStaticWidth",cropperStaticHeight:"cropperStaticHeight",canvasRotation:"canvasRotation",initialStepSize:"initialStepSize",roundCropper:"roundCropper",onlyScaleDown:"onlyScaleDown",imageQuality:"imageQuality",autoCrop:"autoCrop",backgroundColor:"backgroundColor",containWithinAspectRatio:"containWithinAspectRatio",hideResizeSquares:"hideResizeSquares",allowMoveImage:"allowMoveImage",cropper:"cropper",alignImage:"alignImage",disabled:"disabled",hidden:"hidden"},outputs:{imageCropped:"imageCropped",startCropImage:"startCropImage",imageLoaded:"imageLoaded",cropperReady:"cropperReady",loadImageFailed:"loadImageFailed",transformChange:"transformChange"},features:[e.TTD],decls:5,vars:10,consts:[["wrapper",""],["class","ngx-ic-source-image",3,"src","visibility","transform","ngx-ic-draggable","load","mousedown","touchstart","error",4,"ngIf"],[1,"ngx-ic-overlay"],["class","ngx-ic-cropper","tabindex","0",3,"ngx-ic-round","top","left","width","height","margin-left","visibility","keydown",4,"ngIf"],[1,"ngx-ic-source-image",3,"src","load","mousedown","touchstart","error"],["sourceImage",""],["tabindex","0",1,"ngx-ic-cropper",3,"keydown"],[1,"ngx-ic-move",3,"mousedown","touchstart"],[4,"ngIf"],[1,"ngx-ic-resize","ngx-ic-topleft",3,"mousedown","touchstart"],[1,"ngx-ic-square"],[1,"ngx-ic-resize","ngx-ic-top"],[1,"ngx-ic-resize","ngx-ic-topright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-right"],[1,"ngx-ic-resize","ngx-ic-bottomright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-bottom"],[1,"ngx-ic-resize","ngx-ic-bottomleft",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-left"],[1,"ngx-ic-resize-bar","ngx-ic-top",3,"mousedown","touchstart"],[1,"ngx-ic-resize-bar","ngx-ic-right",3,"mousedown","touchstart"],[1,"ngx-ic-resize-bar","ngx-ic-bottom",3,"mousedown","touchstart"],[1,"ngx-ic-resize-bar","ngx-ic-left",3,"mousedown","touchstart"]],template:function(t,i){1&t&&(e.TgZ(0,"div",null,0),e.YNc(2,_e,2,8,"img",1),e._UZ(3,"div",2),e.YNc(4,Ce,3,15,"div",3),e.qZA()),2&t&&(e.Udp("background",i.imageVisible&&i.backgroundColor),e.xp6(2),e.Q6J("ngIf",i.safeImgDataUrl),e.xp6(1),e.Udp("width",i.maxSize.width,"px")("height",i.maxSize.height,"px")("margin-left","center"===i.alignImage?i.marginLeft:null),e.xp6(1),e.Q6J("ngIf",i.imageVisible))},dependencies:[g.O5],styles:['[_nghost-%COMP%]{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:100%;position:relative}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;transform-origin:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image.ngx-ic-draggable[_ngcontent-%COMP%]{user-drag:none;-webkit-user-drag:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;cursor:grab}[_nghost-%COMP%]   .ngx-ic-overlay[_ngcontent-%COMP%]{position:absolute;pointer-events:none;touch-action:none;outline:var(--cropper-overlay-color, white) solid 100vw;top:0;left:0}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{position:absolute;display:flex;color:#53535c;background:transparent;outline:rgba(255,255,255,.3) solid 100vw;outline:var(--cropper-outline-color, rgba(255, 255, 255, .3)) solid 100vw;touch-action:none}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{outline-width:100vh}}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:after{position:absolute;content:"";inset:0;pointer-events:none;border:dashed 1px;opacity:.75;color:inherit;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{width:100%;cursor:move;border:1px solid rgba(255,255,255,.5)}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:focus   .ngx-ic-move[_ngcontent-%COMP%]{border-color:#1e90ff;border-width:2px}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]   .ngx-ic-square[_ngcontent-%COMP%]{display:inline-block;background:#53535C;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topleft[_ngcontent-%COMP%]{top:-12px;left:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-top[_ngcontent-%COMP%]{top:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topright[_ngcontent-%COMP%]{top:-12px;right:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-right[_ngcontent-%COMP%]{top:calc(50% - 12px);right:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomright[_ngcontent-%COMP%]{bottom:-12px;right:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomleft[_ngcontent-%COMP%]{bottom:-12px;left:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-left[_ngcontent-%COMP%]{top:calc(50% - 12px);left:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%]{position:absolute;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-top[_ngcontent-%COMP%]{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-right[_ngcontent-%COMP%]{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-left[_ngcontent-%COMP%]{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]{outline-color:transparent}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{border-radius:100%;box-shadow:0 0 0 100vw #ffffff4d;box-shadow:0 0 0 100vw var(--cropper-outline-color, rgba(255, 255, 255, .3))}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{box-shadow:0 0 0 100vh #ffffff4d;box-shadow:0 0 0 100vh var(--cropper-outline-color, rgba(255, 255, 255, .3))}}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{border-radius:100%}.disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{display:none}.ngx-ix-hidden[_nghost-%COMP%]{display:none}'],changeDetection:0}),r})(),ze=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[g.ez]]}),r})();var P=p(639),F=p(1894);function Ee(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"address",71)(1,"i",72),e._uU(2),e._UZ(3,"br"),e._uU(4),e._UZ(5,"br"),e._uU(6),e._UZ(7,"br"),e._uU(8),e.qZA(),e.TgZ(9,"div",73)(10,"button",74),e.NdJ("click",function(){const n=e.CHM(t).$implicit,a=e.oxw();return a.changeaddress(n),e.KtG(a.addressflag=!0)}),e._UZ(11,"i",16),e.qZA(),e.TgZ(12,"button",75),e.NdJ("click",function(){const n=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.deleteaddress(n._id))}),e._UZ(13,"i",18),e.qZA()()()}if(2&r){const t=s.$implicit;e.xp6(2),e.hij("",t.street,", "),e.xp6(2),e.hij(" ",t.addressLine2,", "),e.xp6(2),e.hij(" ",t.city,", "),e.xp6(2),e.AsE(" ",t.state,"-",t.pin," ")}}function Le(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"button",76),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(),n=e.MAs(84);return o.addaddress(),e.KtG(n.reset)}),e._uU(1,"Add"),e.qZA()}if(2&r){e.oxw();const t=e.MAs(84);e.Q6J("disabled",!t.dirty)}}function qe(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"button",76),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.updateaddress())}),e._uU(1,"Update"),e.qZA()}if(2&r){e.oxw();const t=e.MAs(84);e.Q6J("disabled",!t.dirty)}}let Je=(()=>{class r{constructor(t,i,o){this.service=t,this.loader=i,this.router=o,this.Toast=A().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:n=>{n.addEventListener("mouseenter",A().stopTimer),n.addEventListener("mouseleave",A().resumeTimer)}}),this.user={name:"",email:"",picture:""},this.edituser={email:"",name:""},this.addresss=[],this.address={street:"",addressLine2:"",city:"",state:"",pin:""},this.addressflag=!1,this.imageChangedEvent="",this.croppedImage="",this.addressid="",this.passwords={old_password:"",new_password:""}}ngOnInit(){this.getProfile()}getProfile(){this.loader.start(),this.service.get(localStorage.getItem("loginuser")).subscribe(t=>{this.user=t,this.edituser.name=t.name,this.edituser.email=t.email,this.loader.stop()},t=>{this.loader.stop(),console.log(t)})}delete(){A().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(t=>{t.isConfirmed&&this.service.removeprofileimg(localStorage.getItem("loginuser")).subscribe(i=>{this.Toast.fire({icon:"success",title:"Image Removed"}),this.getProfile()},i=>{this.Toast.fire({icon:"error",title:"Error!"}),console.log(i)})})}getaddress(){this.service.getaddress(localStorage.getItem("loginuser")).subscribe(t=>{this.addresss=t},t=>{console.log(t)})}editProfile(){this.service.updateprofile(localStorage.getItem("loginuser"),this.edituser).subscribe(t=>{this.user.name=t.name,this.user.email=t.email,this.user=t,this.Toast.fire({icon:"success",title:"Profile Updated"})},t=>{console.log(t),this.Toast.fire({icon:"error",title:"Authentication failed",text:t.error.message})})}getevent(t){this.imageChangedEvent=t}fileChangeEvent(t){this.loader.start(),this.img=t.addedFiles?.get(0)?URL.createObjectURL(t.addedFiles?.get(0)):""}imageCropped(t){this.croppedImage=t.base64,this.imgfile=this.croppedImage?function He(r){const s=r.split(","),t=s[0].replace("data:","").replace(";base64",""),i=atob(s[1]),o=new ArrayBuffer(i.length),n=new Uint8Array(o);for(let a=0;a<i.length;a+=1)n[a]=i.charCodeAt(a);return new Blob([o],{type:t})}(this.croppedImage):""}imageLoaded(){}cropperReady(){this.loader.stop()}loadImageFailed(){}upload(){let t=new FormData;this.loader.start(),t.append("picture",this.imgfile),this.service.updateprofileimg(localStorage.getItem("loginuser"),t).subscribe(i=>{this.user.picture=this.croppedImage,this.loader.stop(),this.Toast.fire({icon:"success",title:"Image Uploaded"})},i=>{console.log(i),this.loader.stop(),this.Toast.fire({icon:"error",title:"Authentication failed",text:i.statusText})})}addaddress(){this.service.setaddress(localStorage.getItem("loginuser"),this.address).subscribe(t=>{this.getaddress(),console.log(t),this.Toast.fire({icon:"success",title:"Address added successfully"}),this.address={street:"",addressLine2:"",city:"",state:"",pin:""}},t=>{console.log(t),this.Toast.fire({icon:"error",title:"Authentication failed",text:t.error.message})})}changeaddress(t){this.address=t,this.addressid=t._id}updateaddress(){this.service.updateaddress(localStorage.getItem("loginuser"),this.address,this.addressid).subscribe(t=>{this.getaddress(),this.Toast.fire({icon:"success",title:"Address updated successfully"})},t=>{console.log(t),this.Toast.fire({icon:"error",title:"Authentication failed",text:t.error.message})})}emptyaddress(){this.address={street:"",addressLine2:"",city:"",state:"",pin:""}}deleteaddress(t){A().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(i=>{i.isConfirmed&&this.service.deleteaddress(localStorage.getItem("loginuser"),t).subscribe(o=>{this.getaddress(),this.Toast.fire({icon:"success",title:"Address deleted successfully"})})})}changepassword(){this.service.changepassword(localStorage.getItem("loginuser"),this.passwords).subscribe(t=>{this.Toast.fire({icon:"success",title:"Password changed successfully"})},t=>{console.log(t),this.Toast.fire({icon:"error",title:"Authentication failed",text:t.error.message})})}deleteaccount(){A().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(t=>{t.isConfirmed&&this.service.deleteaccount(localStorage.getItem("loginuser")).subscribe(i=>{this.Toast.fire({icon:"success",title:"Account Deleted successfully"}),localStorage.removeItem("loginuser"),this.router.navigate([""])})})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(P.v),e.Y36(M.LA),e.Y36(x.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-customer-profile"]],decls:127,vars:22,consts:[[1,"container",2,"height","75vh"],[1,"row","d-flex","justify-content-center","align-items-center","w-100","h-100"],[1,"col-lg-6","col-md-12","position-relative","shadow-lg"],[1,"circle","position-absolute","rounded-circle"],[1,"row","rounded","main-content","p-0"],[1,"col-4","p-0","position-relative","img"],["data-bs-toggle","modal","data-bs-target","#updateprofileimgform",1,"bi","bi-pencil-square","position-absolute","top-50","start-50","fs-2","text-white"],[1,"bi","bi-trash3","position-absolute","top-50","start-50","fs-2","text-white",3,"click"],["alt","Customer image",1,"img-fluid","rounded-start",3,"src"],[1,"col-8"],[1,"row","h-100"],[1,"col-11","p-5","d-flex","flex-column","align-items-start","justify-content-center"],[1,"text-capitalize"],[1,"col-1","h-100","p-0"],["role","group","aria-label","Vertical radio toggle button group",1,"btn-group-vertical","row","d-flex","flex-column","p-0","m-0","h-100","w-100"],["data-bs-toggle","modal","data-bs-target","#updateprofileform",1,"btn","btn-outline-secondary","btn-dark","col","p-0","rounded-start-0","border-0"],[1,"bi","bi-pencil-square"],[1,"btn","btn-outline-secondary","btn-dark","col","p-0","border-start-0","border-end-0",3,"click"],[1,"bi","bi-trash3"],["data-bs-toggle","modal","data-bs-target","#passwordform",1,"btn","btn-outline-secondary","btn-dark","col","p-0","border-start-0","border-end-0"],[1,"bi","bi-person-lock"],["data-bs-toggle","modal","data-bs-target","#addressform",1,"btn","btn-outline-secondary","btn-dark","col","p-0","border-start-0","border-end-0",3,"click"],[1,"bi","bi-house-add"],["data-bs-toggle","collapse","data-bs-target","#collapseWidthExample","aria-expanded","false","aria-controls","collapseWidthExample",1,"btn","btn-outline-secondary","btn-dark","col","p-0","rounded-start-0","border-0","border-top","border-secondary",3,"click"],[1,"bi","bi-houses"],[1,"row","position-absolute","w-100","overflow-y-auto",2,"max-height","250px"],["id","collapseWidthExample",1,"collapse","p-0"],[1,"overflow-hidden","main-content","rounded","p-3"],["class","card card-body p-0 main-content bg-light-subtle d-flex flex-row justify-content-between",4,"ngFor","ngForOf"],["id","updateprofileform","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","staticBackdropLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"",3,"ngSubmit"],["profileForm","ngForm"],[1,"form-floating","mb-3"],["type","email","name","email","placeholder","Email\n                        address",1,"form-control","border-dark",3,"ngModel","ngModelChange"],["for","floatingInput"],["type","text","name","name","placeholder","Name",1,"form-control","border-dark",3,"ngModel","ngModelChange"],["data-bs-dismiss","modal",1,"btn","btn-dark","w-100"],["id","updateprofileimgform","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-xl"],[1,"row","p-5"],[1,"col-3","my-auto"],[1,"input-group","h-100",3,"click"],[1,"w-100",3,"change"],[1,"col-6","my-auto"],["format","png",2,"max-height","60vh",3,"imageChangedEvent","maintainAspectRatio","aspectRatio","imageURL","imageCropped","imageLoaded","cropperReady","loadImageFailed"],[3,"src"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary","my-3",3,"click"],["id","addressform","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-header","py-2","px-3"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,""],["addressForm","ngForm"],["type","text","name","addressLine2","placeholder","addressLine2",1,"form-control","border-dark",3,"ngModel","ngModelChange"],["type","text","name","street","placeholder","street",1,"form-control","border-dark",3,"ngModel","ngModelChange"],["type","text","name","city","placeholder","city",1,"form-control","border-dark",3,"ngModel","ngModelChange"],["type","text","name","state","placeholder","state",1,"form-control","border-dark",3,"ngModel","ngModelChange"],["type","number","name","pin","placeholder","pin",1,"form-control","border-dark",3,"ngModel","ngModelChange"],["class","btn btn-dark w-100","data-bs-dismiss","modal",3,"disabled","click",4,"ngIf"],["id","passwordform","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],["passwordForm","ngForm"],["type","password","name","old_password","placeholder","Password",1,"form-control","border-dark",3,"ngModel","ngModelChange"],["type","text","name","new_password","placeholder","new_password",1,"form-control","border-dark",3,"ngModel","ngModelChange"],["data-bs-dismiss","modal",1,"btn","btn-dark","w-100",3,"click"],[1,"card","card-body","p-0","main-content","bg-light-subtle","d-flex","flex-row","justify-content-between"],[1,"w-75","ps-3","py-2"],["role","group",1,"btn-group-vertical"],["id","addresstrigger","data-bs-toggle","modal","data-bs-target","#addressform",1,"btn",3,"click"],[1,"btn",3,"click"],["data-bs-dismiss","modal",1,"btn","btn-dark","w-100",3,"disabled","click"]],template:function(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"div",3),e.TgZ(4,"div",4)(5,"div",5),e._UZ(6,"i",6),e.TgZ(7,"i",7),e.NdJ("click",function(){return i.delete()}),e.qZA(),e._UZ(8,"img",8),e.qZA(),e.TgZ(9,"div",9)(10,"div",10)(11,"div",11)(12,"h3",12),e._uU(13),e.qZA(),e.TgZ(14,"h5"),e._uU(15),e.qZA()(),e.TgZ(16,"div",13)(17,"div",14)(18,"button",15),e._UZ(19,"i",16),e.qZA(),e.TgZ(20,"button",17),e.NdJ("click",function(){return i.deleteaccount()}),e._UZ(21,"i",18),e.qZA(),e.TgZ(22,"button",19),e._UZ(23,"i",20),e.qZA(),e.TgZ(24,"button",21),e.NdJ("click",function(){return i.addressflag=!1}),e._UZ(25,"i",22),e.qZA(),e.TgZ(26,"button",23),e.NdJ("click",function(){return i.getaddress()}),e._UZ(27,"i",24),e.qZA()()()()()(),e.TgZ(28,"div",25)(29,"div",26)(30,"div",27),e.YNc(31,Ee,14,5,"address",28),e.qZA()()()()()(),e.TgZ(32,"div",29)(33,"div",30)(34,"div",31)(35,"div",32)(36,"h1",33),e._uU(37,"Update Customer Profile"),e.qZA(),e._UZ(38,"button",34),e.qZA(),e.TgZ(39,"div",35)(40,"form",36,37),e.NdJ("ngSubmit",function(){return i.editProfile()}),e.TgZ(42,"div",38)(43,"input",39),e.NdJ("ngModelChange",function(a){return i.edituser.email=a}),e.qZA(),e.TgZ(44,"label",40),e._uU(45,"Email address"),e.qZA()(),e.TgZ(46,"div",38)(47,"input",41),e.NdJ("ngModelChange",function(a){return i.edituser.name=a}),e.qZA(),e.TgZ(48,"label",40),e._uU(49,"Name"),e.qZA()(),e.TgZ(50,"button",42),e._uU(51,"Update"),e.qZA()()()()()(),e.TgZ(52,"div",43)(53,"div",44)(54,"div",31)(55,"div",32)(56,"h1",33),e._uU(57,"Update Customer Profile"),e.qZA(),e._UZ(58,"button",34),e.qZA(),e.TgZ(59,"div",35)(60,"div",45)(61,"div",46)(62,"h2"),e._uU(63,"Image Cropper"),e.qZA(),e.TgZ(64,"div",47),e.NdJ("click",function(a){return i.getevent(a)}),e.TgZ(65,"ngx-dropzone",48),e.NdJ("change",function(a){return i.fileChangeEvent(a)}),e.TgZ(66,"ngx-dropzone-label"),e._uU(67,"Drop images here..."),e.qZA()()()(),e.TgZ(68,"div",49)(69,"image-cropper",50),e.NdJ("imageCropped",function(a){return i.imageCropped(a)})("imageLoaded",function(){return i.imageLoaded()})("cropperReady",function(){return i.cropperReady()})("loadImageFailed",function(){return i.loadImageFailed()}),e.qZA()(),e.TgZ(70,"div",46),e._UZ(71,"img",51),e.qZA()()(),e.TgZ(72,"div",52)(73,"button",53),e.NdJ("click",function(){return i.upload()}),e._uU(74," Update "),e.qZA()()()()(),e.TgZ(75,"div",54)(76,"div",55)(77,"div",31)(78,"div",56)(79,"h1",33),e._uU(80,"Address"),e.qZA(),e.TgZ(81,"button",57),e.NdJ("click",function(){return i.emptyaddress()}),e.qZA()(),e.TgZ(82,"div",35)(83,"form",58,59)(85,"div",38)(86,"input",60),e.NdJ("ngModelChange",function(a){return i.address.addressLine2=a}),e.qZA(),e.TgZ(87,"label",40),e._uU(88,"Address Line"),e.qZA()(),e.TgZ(89,"div",38)(90,"input",61),e.NdJ("ngModelChange",function(a){return i.address.street=a}),e.qZA(),e.TgZ(91,"label",40),e._uU(92,"Street"),e.qZA()(),e.TgZ(93,"div",38)(94,"input",62),e.NdJ("ngModelChange",function(a){return i.address.city=a}),e.qZA(),e.TgZ(95,"label",40),e._uU(96,"City"),e.qZA()(),e.TgZ(97,"div",38)(98,"input",63),e.NdJ("ngModelChange",function(a){return i.address.state=a}),e.qZA(),e.TgZ(99,"label",40),e._uU(100,"State"),e.qZA()(),e.TgZ(101,"div",38)(102,"input",64),e.NdJ("ngModelChange",function(a){return i.address.pin=a}),e.qZA(),e.TgZ(103,"label",40),e._uU(104,"Pin Code"),e.qZA()(),e.YNc(105,Le,2,1,"button",65),e.YNc(106,qe,2,1,"button",65),e.qZA()()()()(),e.TgZ(107,"div",66)(108,"div",30)(109,"div",31)(110,"div",32)(111,"h1",33),e._uU(112,"Change Password"),e.qZA(),e._UZ(113,"button",34),e.qZA(),e.TgZ(114,"div",35)(115,"form",36,67),e.NdJ("ngSubmit",function(){return i.changepassword()}),e.TgZ(117,"div",38)(118,"input",68),e.NdJ("ngModelChange",function(a){return i.passwords.old_password=a}),e.qZA(),e.TgZ(119,"label",40),e._uU(120,"Old Password"),e.qZA()(),e.TgZ(121,"div",38)(122,"input",69),e.NdJ("ngModelChange",function(a){return i.passwords.new_password=a}),e.qZA(),e.TgZ(123,"label",40),e._uU(124,"New Password"),e.qZA()(),e.TgZ(125,"button",70),e.NdJ("click",function(){e.CHM(o);const a=e.MAs(116);return e.KtG(a.reset)}),e._uU(126,"Update"),e.qZA()()()()()()}2&t&&(e.xp6(8),e.Q6J("src",i.user.picture,e.LSH),e.xp6(5),e.Oqu(i.user.name),e.xp6(2),e.Oqu(i.user.email),e.xp6(16),e.Q6J("ngForOf",i.addresss),e.xp6(12),e.Q6J("ngModel",i.edituser.email),e.xp6(4),e.Q6J("ngModel",i.edituser.name),e.xp6(22),e.Q6J("imageChangedEvent",i.imageChangedEvent)("maintainAspectRatio",!0)("aspectRatio",1)("imageURL",i.img),e.xp6(2),e.Tol(i.croppedImage?"shadow-lg rounded p-2 object-fit-contain img-fluid mx-auto d-block":""),e.Q6J("src",i.croppedImage,e.LSH),e.xp6(15),e.Q6J("ngModel",i.address.addressLine2),e.xp6(4),e.Q6J("ngModel",i.address.street),e.xp6(4),e.Q6J("ngModel",i.address.city),e.xp6(4),e.Q6J("ngModel",i.address.state),e.xp6(4),e.Q6J("ngModel",i.address.pin),e.xp6(3),e.Q6J("ngIf",!i.addressflag),e.xp6(1),e.Q6J("ngIf",i.addressflag),e.xp6(12),e.Q6J("ngModel",i.passwords.old_password),e.xp6(4),e.Q6J("ngModel",i.passwords.new_password))},dependencies:[g.sg,g.O5,Ue,F._f,F.NP,d._Y,d.Fj,d.wV,d.JJ,d.JL,d.On,d.F],styles:[".circle[_ngcontent-%COMP%]{width:150px;height:150px;left:85%;top:60%;z-index:-1;background:linear-gradient(-40deg,#B799FF,#AEE2FF)}.main-content[_ngcontent-%COMP%]{background:#00000017;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px);box-shadow:#32325d40 0 50px 100px -20px,#0000004d 0 30px 60px -30px,#0a254059 0 -2px 6px inset}.img[_ngcontent-%COMP%]{z-index:-1}.img[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{filter:blur(8px)}.img[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{z-index:1;display:none}.img[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:first-child{transform:translate(-150%,-50%)!important}.img[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transform:translate(50%,-50%)}.img[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{display:block!important}"]}),r})();var D=p(8712);let Pe=(()=>{class r{constructor(t,i){this.service=t,this.recaptchaV3Service=i,this.Toast=A().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:o=>{o.addEventListener("mouseenter",A().stopTimer),o.addEventListener("mouseleave",A().resumeTimer)}}),this.user={email:"",password:"",name:"",address:{street:"",addressLine2:"",city:"",state:"",pin:""},captcha:""}}register(){this.recaptchaV3Service.execute("importantAction").subscribe(t=>{this.user.captcha=t,this.service.set(this.user).subscribe(i=>{console.log(i),this.Toast.fire({icon:"success",title:"Registration Successful"})},i=>{console.log(i),this.Toast.fire({icon:"error",title:"Authentication failed",text:i.error.message})})})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(P.v),e.Y36(D.YC))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-customer-registration"]],decls:44,vars:9,consts:[["id","registrationform","data-bs-backdrop","static","tabindex","-1","aria-labelledby","staticBackdropLabel2","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","py-2","px-3"],["id","staticBackdropLabel2",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"",3,"ngSubmit"],["registerForm","ngForm"],[1,"form-floating","mb-3"],["type","email","name","email","placeholder","Email\n                        address",1,"form-control","border-dark",3,"ngModel","ngModelChange"],["for","floatingInput"],["type","password","name","password","placeholder","Password",1,"form-control","border-dark",3,"ngModel","ngModelChange"],["type","text","name","fullname","placeholder","Password",1,"form-control","border-dark",3,"ngModel","ngModelChange"],["type","text","name","companyname","placeholder","Password",1,"form-control","border-dark",3,"ngModel","ngModelChange"],["type","number","name","companyname","placeholder","Password",1,"form-control","border-dark",3,"ngModel","ngModelChange"],["data-bs-dismiss","modal",1,"btn","btn-dark","w-100",3,"disabled"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),e._uU(5,"Customer Registration"),e.qZA(),e._UZ(6,"button",5),e.qZA(),e.TgZ(7,"div",6)(8,"form",7,8),e.NdJ("ngSubmit",function(){return i.register()}),e.TgZ(10,"div",9)(11,"input",10),e.NdJ("ngModelChange",function(n){return i.user.email=n}),e.qZA(),e.TgZ(12,"label",11),e._uU(13,"Email address"),e.qZA()(),e.TgZ(14,"div",9)(15,"input",12),e.NdJ("ngModelChange",function(n){return i.user.password=n}),e.qZA(),e.TgZ(16,"label",11),e._uU(17,"Password"),e.qZA()(),e.TgZ(18,"div",9)(19,"input",13),e.NdJ("ngModelChange",function(n){return i.user.name=n}),e.qZA(),e.TgZ(20,"label",11),e._uU(21,"Full Name"),e.qZA()(),e.TgZ(22,"div",9)(23,"input",14),e.NdJ("ngModelChange",function(n){return i.user.address.addressLine2=n}),e.qZA(),e.TgZ(24,"label",11),e._uU(25,"Address Line"),e.qZA()(),e.TgZ(26,"div",9)(27,"input",14),e.NdJ("ngModelChange",function(n){return i.user.address.street=n}),e.qZA(),e.TgZ(28,"label",11),e._uU(29,"Street"),e.qZA()(),e.TgZ(30,"div",9)(31,"input",14),e.NdJ("ngModelChange",function(n){return i.user.address.city=n}),e.qZA(),e.TgZ(32,"label",11),e._uU(33,"City"),e.qZA()(),e.TgZ(34,"div",9)(35,"input",14),e.NdJ("ngModelChange",function(n){return i.user.address.state=n}),e.qZA(),e.TgZ(36,"label",11),e._uU(37,"State"),e.qZA()(),e.TgZ(38,"div",9)(39,"input",15),e.NdJ("ngModelChange",function(n){return i.user.address.pin=n}),e.qZA(),e.TgZ(40,"label",11),e._uU(41,"Pin Code"),e.qZA()(),e.TgZ(42,"button",16),e._uU(43,"Regiter"),e.qZA()()()()()()),2&t){const o=e.MAs(9);e.xp6(11),e.Q6J("ngModel",i.user.email),e.xp6(4),e.Q6J("ngModel",i.user.password),e.xp6(4),e.Q6J("ngModel",i.user.name),e.xp6(4),e.Q6J("ngModel",i.user.address.addressLine2),e.xp6(4),e.Q6J("ngModel",i.user.address.street),e.xp6(4),e.Q6J("ngModel",i.user.address.city),e.xp6(4),e.Q6J("ngModel",i.user.address.state),e.xp6(4),e.Q6J("ngModel",i.user.address.pin),e.xp6(3),e.Q6J("disabled",!o.dirty)}},dependencies:[d._Y,d.Fj,d.wV,d.JJ,d.JL,d.On,d.F]}),r})();var Fe=p(7073);let Be=(()=>{class r{constructor(t,i,o,n,a){this.service=t,this.recaptchaV3Service=i,this.cartservice=o,this.navbar=n,this.store=a,this.Toast=A().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:c=>{c.addEventListener("mouseenter",A().stopTimer),c.addEventListener("mouseleave",A().resumeTimer)}}),this.user={email:"",password:"",captcha:""}}ngOnInit(){setTimeout(()=>{document.querySelector(".grecaptcha-badge").style.display="none"},1e3)}login(){this.recaptchaV3Service.execute("importantAction").subscribe(t=>{this.user.captcha=t,this.service.login(this.user).subscribe(i=>{localStorage.setItem("loginuser",i.token),this.navbar.customerlogin.next(localStorage.getItem("loginuser")),this.navbar.changeprofilestate(localStorage.getItem("loginuser")),this.Toast.fire({icon:"success",title:"Login Successful"}),this.store.dispatch((0,_.gz)()),this.cartservice.login.next(!0)},i=>{console.log(i),this.Toast.fire({icon:"error",title:"Authentication failed",text:i.error.message})})})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(P.v),e.Y36(D.YC),e.Y36(Fe.N),e.Y36(b.I),e.Y36(I.yh))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-customer-login"]],decls:20,vars:3,consts:[["id","loginform","data-bs-backdrop","static","tabindex","-1","aria-labelledby","staticBackdropLabel1","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","staticBackdropLabel1",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"",3,"ngSubmit"],["loginForm","ngForm"],[1,"form-floating","mb-3"],["type","email","name","email","placeholder","Email\n                        address",1,"form-control","border-dark",3,"ngModel","ngModelChange"],["for","floatingInput"],["type","password","name","password","placeholder","Password",1,"form-control","border-dark",3,"ngModel","ngModelChange"],["data-bs-dismiss","modal",1,"btn","btn-dark","w-100",3,"disabled"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),e._uU(5,"Customer Login"),e.qZA(),e._UZ(6,"button",5),e.qZA(),e.TgZ(7,"div",6)(8,"form",7,8),e.NdJ("ngSubmit",function(){return i.login()}),e.TgZ(10,"div",9)(11,"input",10),e.NdJ("ngModelChange",function(n){return i.user.email=n}),e.qZA(),e.TgZ(12,"label",11),e._uU(13,"Email address"),e.qZA()(),e.TgZ(14,"div",9)(15,"input",12),e.NdJ("ngModelChange",function(n){return i.user.password=n}),e.qZA(),e.TgZ(16,"label",11),e._uU(17,"Password"),e.qZA()(),e.TgZ(18,"button",13),e._uU(19,"Login"),e.qZA()()()()()()),2&t){const o=e.MAs(9);e.xp6(11),e.Q6J("ngModel",i.user.email),e.xp6(4),e.Q6J("ngModel",i.user.password),e.xp6(3),e.Q6J("disabled",!o.dirty)}},dependencies:[d._Y,d.Fj,d.JJ,d.JL,d.On,d.F]}),r})(),Qe=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-shop"]],decls:3,vars:0,template:function(t,i){1&t&&e._UZ(0,"router-outlet")(1,"app-customer-registration")(2,"app-customer-login")},dependencies:[x.lC,Pe,Be]}),r})();var G=p(1010),K=p(529);let Ne=(()=>{class r{constructor(t){this.httpclient=t}setheader(t){return new K.WM({Authorization:"Bearer "+t})}get(t,i){return this.httpclient.get("https://shop-api.ngminds.com/shop/orders",{headers:this.setheader(t),params:i})}getsingle(t,i){return this.httpclient.get(`https://shop-api.ngminds.com/shop/orders/${i}`,{headers:this.setheader(t)})}cancel(t,i){return this.httpclient.patch(`https://shop-api.ngminds.com/shop/orders/cancel/${i}`,{},{headers:this.setheader(t)})}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(K.eN))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function We(r,s){1&r&&(e.TgZ(0,"b"),e._uU(1,","),e.qZA())}function Ye(r,s){if(1&r&&(e.TgZ(0,"strong"),e._uU(1),e.ALo(2,"description"),e.YNc(3,We,2,0,"b",22),e.qZA()),2&r){const t=s.$implicit,i=s.index,o=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.xi3(2,2,t.name,"title")," "),e.xp6(2),e.Q6J("ngIf",i<o.items.length-1)}}function De(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"tr",16),e.NdJ("click",function(){const n=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.oneorder(n))}),e.TgZ(1,"td",17),e._UZ(2,"img",18),e.qZA(),e.TgZ(3,"td",19),e.YNc(4,Ye,4,5,"strong",20),e._UZ(5,"br"),e.TgZ(6,"small"),e._uU(7),e.ALo(8,"date"),e.qZA()(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td",21),e._uU(12),e.ALo(13,"currency"),e.qZA()()}if(2&r){const t=s.$implicit,i=e.oxw();e.xp6(2),e.Q6J("src",i.getimages(t.items[0].name),e.LSH),e.xp6(2),e.Q6J("ngForOf",t.items),e.xp6(3),e.hij(" ",e.lcZ(8,5,t.createdAt)," "),e.xp6(3),e.Oqu(t.status),e.xp6(2),e.hij(" ",e.xi3(13,7,t.total,"INR")," ")}}function Ge(r,s){if(1&r&&(e.TgZ(0,"div",29)(1,"div",30),e._UZ(2,"img",31),e.qZA(),e.TgZ(3,"div",25)(4,"h5"),e._uU(5),e.qZA(),e.TgZ(6,"h5"),e._uU(7),e.ALo(8,"currency"),e.qZA()()()),2&r){const t=s.$implicit,i=e.oxw(2);e.xp6(2),e.Q6J("src",i.getimages(null==t?null:t.name),e.LSH),e.xp6(3),e.Oqu(null==t?null:t.name),e.xp6(2),e.AsE(" ",e.xi3(8,4,null==t?null:t.price,"INR")," X ",null==t?null:t.qty,"")}}function Ke(r,s){if(1&r&&(e.TgZ(0,"div",23)(1,"div",24)(2,"div",25)(3,"address")(4,"strong"),e._uU(5,"Address"),e.qZA(),e._UZ(6,"br"),e._uU(7),e._UZ(8,"br"),e._uU(9),e._UZ(10,"br"),e._uU(11),e._UZ(12,"br"),e._uU(13),e.qZA()(),e.TgZ(14,"div",26)(15,"h6"),e._uU(16),e.ALo(17,"currency"),e.qZA(),e.TgZ(18,"h6"),e._uU(19),e.ALo(20,"currency"),e.qZA(),e.TgZ(21,"h6"),e._uU(22),e.qZA(),e.TgZ(23,"h6"),e._uU(24),e.qZA(),e.TgZ(25,"h6"),e._uU(26),e.ALo(27,"date"),e.qZA()()(),e.TgZ(28,"div",27),e.YNc(29,Ge,9,7,"div",28),e.qZA()()),2&r){const t=e.oxw();e.xp6(7),e.hij(" ",null==t.single?null:t.single.address.addressLine2," "),e.xp6(2),e.hij(" ",null==t.single?null:t.single.address.street," "),e.xp6(2),e.hij(" ",null==t.single?null:t.single.address.city," "),e.xp6(2),e.AsE(" ",null==t.single?null:t.single.address.state," - ",null==t.single?null:t.single.address.pin," "),e.xp6(3),e.hij(" Total: ",e.xi3(17,11,null==t.single?null:t.single.total,"INR"),""),e.xp6(3),e.hij(" Delivery Fee: ",e.xi3(20,14,null==t.single?null:t.single.deliveryFee,"INR"),""),e.xp6(3),e.hij(" Payment Status: ",null==t.single?null:t.single.paymentStatus,""),e.xp6(2),e.hij(" Status: ",null==t.single?null:t.single.status,""),e.xp6(2),e.hij(" Created At: ",e.lcZ(27,17,null==t.single?null:t.single.createdAt),""),e.xp6(3),e.Q6J("ngForOf",null==t.single?null:t.single.items)}}function je(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cancelorder(o.single._id))}),e._uU(1," Cancel Order "),e.qZA()}}function Xe(r,s){if(1&r&&(e.TgZ(0,"button",33),e._uU(1," Complete Order(Pay)"),e.qZA()),2&r){const t=e.oxw();e.Q6J("routerLink","/shop/cart/confirm/"+t.single._id)}}const $e=[{path:"",component:Qe,children:[{path:"",component:ge},{path:"profile",component:Je,canActivate:[G.s]},{path:"cart",loadChildren:()=>p.e(119).then(p.bind(p,2119)).then(r=>r.CartModule)},{path:"orders",component:(()=>{class r{constructor(t,i){this.service=t,this.ProductsService=i,this.images=[]}ngOnInit(){this.loadall()}loadall(){this.service.get(localStorage.getItem("loginuser"),{limit:100}).subscribe(t=>{this.orders=t.results,console.log(t),this.orders.forEach(i=>{i.items.forEach(o=>{this.ProductsService.getlist({name:o.name}).subscribe(n=>{console.log(n),this.images.push({name:o.name,img:n.results[0]?.images[0]?.url||""})})})})})}oneorder(t){this.single=t}getimages(t){let i;return this.images.forEach(o=>{i=o.name===t?o.img:""}),i}cancelorder(t){this.service.cancel(localStorage.getItem("loginuser"),t).subscribe(i=>{console.log(i),this.loadall()},i=>{console.log(i)})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(Ne),e.Y36(C.s))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-orders"]],decls:20,vars:4,consts:[[1,"container","py-5"],[1,"card"],[1,"card-header"],[1,"card-body","py-0"],[1,"table","table-hover","align-middle",2,"border-spacing","0 1em","border-collapse","separate"],["class"," shadow rounded","data-bs-toggle","modal","data-bs-target","#detailsmodel",3,"click",4,"ngFor","ngForOf"],["id","detailsmodel","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-xl"],[1,"modal-content"],[1,"modal-header"],["id","staticBackdropLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],["class","modal-body px-5",4,"ngIf"],[1,"modal-footer"],["type","button","class","btn btn-danger","data-bs-dismiss","modal",3,"click",4,"ngIf"],["type","button","class","btn btn-danger","data-bs-dismiss","modal",3,"routerLink",4,"ngIf"],["data-bs-toggle","modal","data-bs-target","#detailsmodel",1,"shadow","rounded",3,"click"],[1,""],[1,"object-fit-cover","img-thumbnail",2,"width","100px","aspect-ratio","2/2",3,"src"],[1,"px-4"],[4,"ngFor","ngForOf"],[1,"pe-5"],[4,"ngIf"],[1,"modal-body","px-5"],[1,"row","shadow","rounded","p-3"],[1,"col"],[1,"col","border-start"],[1,"row","overflow-y-auto",2,"max-height","50vh"],["class","row mx-auto w-75 my-3 shadow rounded p-3",4,"ngFor","ngForOf"],[1,"row","mx-auto","w-75","my-3","shadow","rounded","p-3"],[1,"col-1"],["alt","",1,"img-fluid",3,"src"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"routerLink"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),e._uU(4,"Order History"),e.qZA()(),e.TgZ(5,"div",3)(6,"table",4)(7,"tbody"),e.YNc(8,De,14,10,"tr",5),e.qZA()()()()(),e.TgZ(9,"div",6)(10,"div",7)(11,"div",8)(12,"div",9)(13,"h1",10),e._uU(14,"Order Summary"),e.qZA(),e.TgZ(15,"button",11),e.NdJ("click",function(){return i.single=null}),e.qZA()(),e.YNc(16,Ke,30,19,"div",12),e.TgZ(17,"div",13),e.YNc(18,je,2,0,"button",14),e.YNc(19,Xe,2,1,"button",15),e.qZA()()()()),2&t&&(e.xp6(8),e.Q6J("ngForOf",i.orders),e.xp6(8),e.Q6J("ngIf",i.single),e.xp6(2),e.Q6J("ngIf","Cancelled"!==(null==i.single?null:i.single.status)),e.xp6(1),e.Q6J("ngIf","Pending"==(null==i.single?null:i.single.status)))},dependencies:[g.sg,g.O5,x.rH,g.H9,g.uU,N.O]}),r})(),canActivate:[G.s]}]}];let et=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[x.Bz.forChild($e),x.Bz]}),r})();var tt=p(7047),it=p(9560);let ot=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[g.ez,it.z,et,ze,F.bB,d.u5,I.Aw.forFeature("cart",tt.C)]}),r})()}}]);