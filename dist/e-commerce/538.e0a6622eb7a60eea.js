"use strict";(self.webpackChunke_commerce=self.webpackChunke_commerce||[]).push([[538],{5747:(f,m,o)=>{o.d(m,{i:()=>e});var d=o(4650),g=o(2467),p=o(316);let e=(()=>{class c{constructor(a,h){this.routes=a,this.service=h}canActivate(){return this.flag(localStorage.getItem("activeuser")||"")}flag(a){return new Promise((h,Z)=>{a.length>0?this.service.get(localStorage.getItem("activeuser")).subscribe({next:v=>{this.routes.navigate(["setting","my-profile"]),h(!1)},error:v=>{localStorage.removeItem("activeuser"),h(!0)}}):h(!0)})}}return c.\u0275fac=function(a){return new(a||c)(d.LFG(g.F0),d.LFG(p.e))},c.\u0275prov=d.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},6538:(f,m,o)=>{o.r(m),o.d(m,{SellerModule:()=>I});var d=o(6895),g=o(2467),p=o(5747),e=o(4650),c=o(316);let l=(()=>{class r{constructor(t,s){this.router=t,this.service=s}canActivate(t,s){return this.flag(localStorage.getItem("activeuser")||"")}flag(t){return new Promise((s,i)=>{t.length>0?this.service.get(localStorage.getItem("activeuser")).subscribe(u=>{s(!0)},u=>{localStorage.removeItem("activeuser"),this.router.navigate(["auth","login"])}):this.router.navigate(["auth","login"])})}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(g.F0),e.LFG(c.e))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var a=o(529);let h=(()=>{class r{constructor(t){this.httpclient=t}get(t){let s=new a.WM({Authorization:"Bearer "+(t||localStorage.getItem("activeuser"))});return this.httpclient.get("https://shop-api.ngminds.com/orders",{headers:s})}getsingle(t){let s=new a.WM({Authorization:"Bearer "+localStorage.getItem("activeuser")});return this.httpclient.get(`https://shop-api.ngminds.com/orders/${t}`,{headers:s})}change(t,s){let i=new a.WM({Authorization:"Bearer "+localStorage.getItem("activeuser")});return this.httpclient.patch(`https://shop-api.ngminds.com/orders/${s}/${t}`,{},{headers:i})}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(a.eN))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var Z=o(7072),v=o(3977);function A(r,n){1&r&&(e.TgZ(0,"b"),e._uU(1,","),e.qZA())}function S(r,n){if(1&r&&(e.TgZ(0,"strong"),e._uU(1),e.ALo(2,"description"),e.YNc(3,A,2,0,"b",27),e.qZA()),2&r){const t=n.$implicit,s=n.index,i=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.xi3(2,2,t.name,"title")," "),e.xp6(2),e.Q6J("ngIf",s<i.items.length-1)}}function x(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"tr",21),e.NdJ("click",function(){const u=e.CHM(t).$implicit,F=e.oxw();return e.KtG(F.oneorder(u._id))}),e.TgZ(1,"td",22),e._UZ(2,"img",23),e.qZA(),e.TgZ(3,"td",24),e.YNc(4,S,4,5,"strong",25),e._UZ(5,"br"),e.TgZ(6,"small"),e._uU(7),e.ALo(8,"date"),e.qZA()(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td",26),e._uU(12),e.ALo(13,"currency"),e.qZA()()}if(2&r){const t=n.$implicit,s=e.oxw();e.xp6(2),e.Q6J("src",s.getimages(t.items[0].name),e.LSH),e.xp6(2),e.Q6J("ngForOf",t.items),e.xp6(3),e.hij(" ",e.lcZ(8,5,t.createdAt)," "),e.xp6(3),e.Oqu(t.status),e.xp6(2),e.hij(" ",e.xi3(13,7,t.total,"INR")," ")}}function b(r,n){if(1&r&&(e.TgZ(0,"div",34)(1,"div",35),e._UZ(2,"img",36),e.qZA(),e.TgZ(3,"div",30)(4,"h5"),e._uU(5),e.qZA(),e.TgZ(6,"h5"),e._uU(7),e.ALo(8,"currency"),e.qZA()()()),2&r){const t=n.$implicit,s=e.oxw(2);e.xp6(2),e.Q6J("src",s.getimages(null==t?null:t.name),e.LSH),e.xp6(3),e.Oqu(null==t?null:t.name),e.xp6(2),e.AsE(" ",e.xi3(8,4,null==t?null:t.price,"INR")," X ",null==t?null:t.qty,"")}}function y(r,n){if(1&r&&(e.TgZ(0,"div",28)(1,"div",29)(2,"div",30)(3,"address")(4,"strong"),e._uU(5,"Address"),e.qZA(),e._UZ(6,"br"),e._uU(7),e._UZ(8,"br"),e._uU(9),e._UZ(10,"br"),e._uU(11),e._UZ(12,"br"),e._uU(13),e.qZA()(),e.TgZ(14,"div",31)(15,"h6"),e._uU(16),e.ALo(17,"currency"),e.qZA(),e.TgZ(18,"h6"),e._uU(19),e.ALo(20,"currency"),e.qZA(),e.TgZ(21,"h6"),e._uU(22),e.qZA(),e.TgZ(23,"h6"),e._uU(24),e.qZA(),e.TgZ(25,"h6"),e._uU(26),e.ALo(27,"date"),e.qZA()()(),e.TgZ(28,"div",32),e.YNc(29,b,9,7,"div",33),e.qZA()()),2&r){const t=e.oxw();e.xp6(7),e.hij(" ",null==t.single?null:t.single.address.addressLine2," "),e.xp6(2),e.hij(" ",null==t.single?null:t.single.address.street," "),e.xp6(2),e.hij(" ",null==t.single?null:t.single.address.city," "),e.xp6(2),e.AsE(" ",null==t.single?null:t.single.address.state," - ",null==t.single?null:t.single.address.pin," "),e.xp6(3),e.hij(" Total: ",e.xi3(17,11,null==t.single?null:t.single.total,"INR"),""),e.xp6(3),e.hij(" Delivery Fee: ",e.xi3(20,14,null==t.single?null:t.single.deliveryFee,"INR"),""),e.xp6(3),e.hij(" Payment Status: ",null==t.single?null:t.single.paymentStatus,""),e.xp6(2),e.hij(" Status: ",null==t.single?null:t.single.status,""),e.xp6(2),e.hij(" Created At: ",e.lcZ(27,17,null==t.single?null:t.single.createdAt),""),e.xp6(3),e.Q6J("ngForOf",null==t.single?null:t.single.items)}}const U=[{path:"",redirectTo:"auth",pathMatch:"full"},{path:"auth",loadChildren:()=>Promise.all([o.e(226),o.e(140)]).then(o.bind(o,140)).then(r=>r.AuthModule),canActivate:[p.i]},{path:"setting",loadChildren:()=>o.e(497).then(o.bind(o,497)).then(r=>r.SettingModule),canActivate:[l]},{path:"product",loadChildren:()=>Promise.all([o.e(226),o.e(894),o.e(522)]).then(o.bind(o,522)).then(r=>r.ProductsModule),canActivate:[l]},{path:"orders",component:(()=>{class r{constructor(t,s){this.service=t,this.ProductsService=s,this.images=[]}ngOnInit(){this.loadall()}loadall(t){this.service.get(t).subscribe({next:s=>{s.results&&(this.orders=s.results),this.orders?.forEach(i=>{i.items?.forEach(u=>{this.collectimg(u)})})},error:s=>{console.log(s)}})}collectimg(t){this.ProductsService.getlist({name:t.name}).subscribe(s=>{this.images.push({name:t.name,img:s?.results?.at(0)?.images?.at(0)?.url})})}getimages(t){let s;return this.images.forEach(i=>{i.name===t&&(s=i.img)}),s}changeaction(t,s){let i=document.getElementById("selectaction");console.log(i?.value),"0"===i?.value&&null==s?alert("select an action"):this.service.change(t,i?.value).subscribe(u=>{this.single=u.order,this.loadall()},u=>{console.log(u)})}oneorder(t){this.service.getsingle(t).subscribe(s=>{this.single=s[0]},s=>{console.log(s)})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(h),e.Y36(Z.s))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-sellers-orders"]],decls:30,vars:4,consts:[[1,"container","py-5"],[1,"card"],[1,"card-header"],[1,"card-body","py-0"],[1,"table","table-hover","align-middle",2,"border-spacing","0 1em","border-collapse","separate"],["class"," shadow rounded","data-bs-toggle","modal","data-bs-target","#detailsmodel",3,"click",4,"ngFor","ngForOf"],["id","detailsmodel","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-xl"],[1,"modal-content"],[1,"modal-header"],["id","staticBackdropLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["class","modal-body px-5",4,"ngIf"],[1,"modal-footer","d-flex","flex-row","justify-content-between","align-items-center"],[1,"input-group","w-50","mb-3"],["id","selectaction",1,"form-select","border","border-black",3,"disabled"],["value","0","selected",""],["value","cancel"],["value","dispatch"],["value","deliver"],["type","button",1,"btn","btn-success",3,"disabled","click"],["data-bs-toggle","modal","data-bs-target","#detailsmodel",1,"shadow","rounded",3,"click"],[1,""],[1,"object-fit-contain","img-thumbnail",2,"width","100px","aspect-ratio","2/2",3,"src"],[1,"px-4"],[4,"ngFor","ngForOf"],[1,"pe-5"],[4,"ngIf"],[1,"modal-body","px-5"],[1,"row","shadow","rounded","p-3"],[1,"col"],[1,"col","border-start"],[1,"row","overflow-y-auto",2,"max-height","50vh"],["class","row mx-auto w-75 my-3 shadow rounded p-3",4,"ngFor","ngForOf"],[1,"row","mx-auto","w-75","my-3","shadow","rounded","p-3"],[1,"col-1"],["alt","",1,"img-fluid",3,"src"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),e._uU(4,"Order History"),e.qZA()(),e.TgZ(5,"div",3)(6,"table",4)(7,"tbody"),e.YNc(8,x,14,10,"tr",5),e.qZA()()()()(),e.TgZ(9,"div",6)(10,"div",7)(11,"div",8)(12,"div",9)(13,"h1",10),e._uU(14,"Order Summary"),e.qZA(),e._UZ(15,"button",11),e.qZA(),e.YNc(16,y,30,19,"div",12),e.TgZ(17,"div",13)(18,"div",14)(19,"select",15)(20,"option",16),e._uU(21,"Choose a action..."),e.qZA(),e.TgZ(22,"option",17),e._uU(23,"Cancel"),e.qZA(),e.TgZ(24,"option",18),e._uU(25,"Dispatch"),e.qZA(),e.TgZ(26,"option",19),e._uU(27,"Deliver"),e.qZA()()(),e.TgZ(28,"button",20),e.NdJ("click",function(){return s.changeaction(s.single._id)}),e._uU(29," Submit "),e.qZA()()()()()),2&t&&(e.xp6(8),e.Q6J("ngForOf",s.orders),e.xp6(8),e.Q6J("ngIf",s.single),e.xp6(3),e.Q6J("disabled","Cancelled"===(null==s.single?null:s.single.status)),e.xp6(9),e.Q6J("disabled","Cancelled"===(null==s.single?null:s.single.status)))},dependencies:[d.sg,d.O5,d.H9,d.uU,v.O]}),r})(),canActivate:[l]}];let O=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[g.Bz.forChild(U),g.Bz]}),r})();var C=o(9560);let I=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[d.ez,O,C.z]}),r})()},316:(f,m,o)=>{o.d(m,{e:()=>p});var d=o(529),g=o(4650);let p=(()=>{class e{constructor(l){this.http=l}setheader(l){return new d.WM({Authorization:"Bearer "+l})}set(l){return this.http.post("https://shop-api.ngminds.com/auth/register",l)}login(l){return this.http.post("https://shop-api.ngminds.com/auth/login",l)}get(l){return this.http.get("https://shop-api.ngminds.com/auth/self",{headers:this.setheader(l)})}forgetpassword(l){return this.http.post("https://shop-api.ngminds.com/auth/forgot-password",l)}resetpassword(l,a){return this.http.post("https://shop-api.ngminds.com/auth/reset-password",l,{params:a})}sendverificationmail(l){return this.http.post("https://shop-api.ngminds.com/auth/send-verification-email",null,{headers:this.setheader(l)})}verifyaccount(l){return this.http.post("https://shop-api.ngminds.com/auth/verify-email",null,{params:l})}googlelogin(l){return this.http.post("https://shop-api.ngminds.com/auth/login/google",l)}}return e.\u0275fac=function(l){return new(l||e)(g.LFG(d.eN))},e.\u0275prov=g.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);